"use strict";(()=>{var e={};e.id=2628,e.ids=[2628],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},14300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},82361:e=>{e.exports=require("events")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},41808:e=>{e.exports=require("net")},85477:e=>{e.exports=require("punycode")},12781:e=>{e.exports=require("stream")},24404:e=>{e.exports=require("tls")},57310:e=>{e.exports=require("url")},59796:e=>{e.exports=require("zlib")},4201:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>f,originalPathname:()=>g,patchFetch:()=>y,requestAsyncStorage:()=>m,routeModule:()=>l,serverHooks:()=>h,staticGenerationAsyncStorage:()=>x,staticGenerationBailout:()=>q});var s={};t.r(s),t.d(s,{GET:()=>p,dynamic:()=>c});var o=t(95419),a=t(69108),i=t(99678),n=t(78070),u=t(55919),d=t(32455);let c="force-dynamic";async function p(e){try{let r=(0,u.createRouteHandlerClient)({cookies:d.cookies}),{data:{session:t}}=await r.auth.getSession();if(!t)return n.Z.json({error:"Unauthorized"},{status:401});let s=e.headers.get("authorization");s&&s.startsWith("Bearer test_");let{data:o,error:a}=await r.from("profiles").select("role").eq("id",t.user.id).single();if(a)return console.error("Error fetching user profile:",a),n.Z.json({error:"Failed to verify admin status"},{status:500});if(!o||"admin"!==o.role)return n.Z.json({error:"Unauthorized - Admin access required"},{status:403});let{data:i,error:c}=await r.from("profiles").select("id, email, full_name, stripe_customer_id, created_at, role").order("created_at",{ascending:!1});if(c)throw console.error("Error fetching users:",c),c;return n.Z.json({users:i})}catch(e){return console.error("Error in admin/users API:",e),n.Z.json({error:`Failed to fetch users: ${e instanceof Error?e.message:String(e)}`},{status:500})}}let l=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/admin/users/route",pathname:"/api/admin/users",filename:"route",bundlePath:"app/api/admin/users/route"},resolvedPagePath:"/Users/alexanderamundsen/hepta/hepta-3/app/api/admin/users/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:m,staticGenerationAsyncStorage:x,serverHooks:h,headerHooks:f,staticGenerationBailout:q}=l,g="/api/admin/users/route";function y(){return(0,i.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:x})}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[1638,6206,2455,5919],()=>t(4201));module.exports=s})();