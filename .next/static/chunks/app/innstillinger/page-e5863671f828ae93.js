(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[90],{5515:function(e,t,r){Promise.resolve().then(r.bind(r,3022))},3022:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return P}});var n=r(7437),s=r(2265),a=r(5754),i=r(7815),o=r(5179),l=r(9842),c=r(3428),d=r(5744),u=r(2210),f=r(6989),m=r(3763),g=r(5184),p=r(4977),h=r(9381);let v="Switch",[b,x]=(0,f.b)(v),[y,k]=b(v),w=(0,s.forwardRef)((e,t)=>{let{__scopeSwitch:r,name:n,checked:a,defaultChecked:i,required:o,disabled:l,value:f="on",onCheckedChange:g,...p}=e,[v,b]=(0,s.useState)(null),x=(0,u.e)(t,e=>b(e)),k=(0,s.useRef)(!1),w=!v||!!v.closest("form"),[S=!1,_]=(0,m.T)({prop:a,defaultProp:i,onChange:g});return(0,s.createElement)(y,{scope:r,checked:S,disabled:l},(0,s.createElement)(h.WV.button,(0,c.Z)({type:"button",role:"switch","aria-checked":S,"aria-required":o,"data-state":N(S),"data-disabled":l?"":void 0,disabled:l,value:f},p,{ref:x,onClick:(0,d.M)(e.onClick,e=>{_(e=>!e),w&&(k.current=e.isPropagationStopped(),k.current||e.stopPropagation())})})),w&&(0,s.createElement)(j,{control:v,bubbles:!k.current,name:n,value:f,checked:S,required:o,disabled:l,style:{transform:"translateX(-100%)"}}))}),S=(0,s.forwardRef)((e,t)=>{let{__scopeSwitch:r,...n}=e,a=k("SwitchThumb",r);return(0,s.createElement)(h.WV.span,(0,c.Z)({"data-state":N(a.checked),"data-disabled":a.disabled?"":void 0},n,{ref:t}))}),j=e=>{let{control:t,checked:r,bubbles:n=!0,...a}=e,i=(0,s.useRef)(null),o=(0,g.D)(r),l=(0,p.t)(t);return(0,s.useEffect)(()=>{let e=i.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(o!==r&&t){let s=new Event("click",{bubbles:n});t.call(e,r),e.dispatchEvent(s)}},[o,r,n]),(0,s.createElement)("input",(0,c.Z)({type:"checkbox","aria-hidden":!0,defaultChecked:r},a,{tabIndex:-1,ref:i,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function N(e){return e?"checked":"unchecked"}var _=r(1657);let C=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(w,{className:(0,_.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",r),...s,ref:t,children:(0,n.jsx)(S,{className:(0,_.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});C.displayName=w.displayName;var E=r(8333),T=r(110),I=r(7013);function P(){let{user:e}=(0,E.useAuth)(),t=(0,I.createClientComponentClient)(),[r,c]=(0,s.useState)({name:"",company:""}),[d,u]=(0,s.useState)({email:!0,marketing:!1,updates:!0}),[f,m]=(0,s.useState)(""),[g,p]=(0,s.useState)(""),[h,v]=(0,s.useState)(""),[b,x]=(0,s.useState)(!1),[y,k]=(0,s.useState)(null),[w,S]=(0,s.useState)(null),[j,N]=(0,s.useState)(!1),[_,P]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(async()=>{if(e)try{console.log("Henter profil for bruker med ID:",e.id);let{data:r,error:n}=await t.from("profiles").select("name, company, notifications, stripe_customer_id, role").eq("user_id",e.id).single();if(n){console.error("Feil ved henting av profil:",n);let{count:r,error:s}=await t.from("profiles").select("*",{count:"exact",head:!0}).eq("user_id",e.id);if(s){console.error("Feil ved sjekk av profil:",s);return}if(0===r){console.log("Profil eksisterer ikke, oppretter ny");let{error:r}=await t.from("profiles").insert({user_id:e.id,name:"",company:"",notifications:{email:!0,marketing:!1,updates:!0},updated_at:new Date});r&&console.error("Feil ved opprettelse av profil:",r)}return}r&&(console.log("Mottok profildata:",r),c({name:r.name||"",company:r.company||""}),r.notifications&&(console.log("Setter notifications:",r.notifications),u(r.notifications)))}catch(e){console.error("Feil ved henting av brukerdata:",e)}})()},[e,t]);let R=e=>{let{id:t,value:r}=e.target;c(e=>({...e,[t]:r}))},M=async()=>{if(e){N(!0),k(null),S(null);try{let n;let{count:s,error:a}=await t.from("profiles").select("*",{count:"exact",head:!0}).eq("user_id",e.id);if(a)throw a;if(0===s){let{error:s}=await t.from("profiles").insert({user_id:e.id,name:r.name,company:r.company,notifications:d,updated_at:new Date});n=s}else{let{error:s}=await t.from("profiles").update({name:r.name,company:r.company,updated_at:new Date}).eq("user_id",e.id);n=s}if(n)throw console.error("Feil ved lagring:",n),n;S("Profilinformasjon lagret!")}catch(e){console.error("Feil ved lagring av profildata:",e),k("Kunne ikke lagre profilinformasjon.")}finally{N(!1)}}},V=async()=>{if(e){P(!0),k(null),S(null);try{let r;console.log("Lagrer varslingsinnstillinger:",d);let{count:n,error:s}=await t.from("profiles").select("*",{count:"exact",head:!0}).eq("user_id",e.id);if(s)throw s;if(0===n){let{error:n}=await t.from("profiles").insert({user_id:e.id,notifications:d,updated_at:new Date});r=n}else{let{error:n}=await t.from("profiles").update({notifications:d,updated_at:new Date}).eq("user_id",e.id);r=n}if(r)throw r;S("Varslingsinnstillinger lagret!")}catch(e){console.error("Feil ved lagring av varslingsinnstillinger:",e),k("Kunne ikke lagre varslingsinnstillinger.")}finally{P(!1)}}},D=async()=>{if(k(null),S(null),g!==h){k("Passordene er ikke like.");return}if(g.length<6){k("Passordet m\xe5 v\xe6re minst 6 tegn.");return}if(!f){k("Du m\xe5 skrive inn ditt n\xe5v\xe6rende passord.");return}x(!0);let{error:r}=await t.auth.signInWithPassword({email:(null==e?void 0:e.email)||"",password:f});if(r){k("Feil n\xe5v\xe6rende passord."),x(!1);return}let{error:n}=await t.auth.updateUser({password:g});x(!1),n?(console.error("Feil ved oppdatering av passord:",n.message),k("Kunne ikke oppdatere passordet.")):(S("Passordet er oppdatert!"),p(""),v(""),m(""))};return(0,n.jsxs)("div",{className:"space-y-8",children:[(0,n.jsx)("h1",{className:"text-4xl font-bold",children:"Innstillinger"}),(0,n.jsxs)(T.mQ,{defaultValue:"profile",className:"w-full",children:[(0,n.jsxs)(T.dr,{className:"mb-6",children:[(0,n.jsx)(T.SP,{value:"profile",children:"Profil"}),(0,n.jsx)(T.SP,{value:"notifications",children:"Varsler"}),(0,n.jsx)(T.SP,{value:"security",children:"Sikkerhet"})]}),(0,n.jsx)(T.nU,{value:"profile",children:(0,n.jsxs)(i.Zb,{className:"border-gray-800 bg-gray-900/50",children:[(0,n.jsxs)(i.Ol,{children:[(0,n.jsx)(i.ll,{children:"Profil"}),(0,n.jsx)(i.SZ,{children:"Administrer din profilinformasjon"})]}),(0,n.jsxs)(i.aY,{className:"space-y-4",children:[y&&(0,n.jsx)("p",{className:"text-red-500 text-sm",children:y}),w&&(0,n.jsx)("p",{className:"text-green-500 text-sm",children:w}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(l._,{htmlFor:"email",children:"E-post"}),(0,n.jsx)(o.I,{id:"email",defaultValue:(null==e?void 0:e.email)||"",readOnly:!0,className:"bg-gray-950/50"})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(l._,{htmlFor:"name",children:"Navn"}),(0,n.jsx)(o.I,{id:"name",placeholder:"Ditt navn",className:"bg-gray-950/50",value:r.name,onChange:R})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(l._,{htmlFor:"company",children:"Selskap"}),(0,n.jsx)(o.I,{id:"company",placeholder:"Ditt selskap",className:"bg-gray-950/50",value:r.company,onChange:R})]}),(0,n.jsx)(a.z,{className:"mt-4 bg-orange-500 hover:bg-orange-600",onClick:M,disabled:j,children:j?"Lagrer...":"Lagre endringer"})]})]})}),(0,n.jsx)(T.nU,{value:"notifications",children:(0,n.jsxs)(i.Zb,{className:"border-gray-800 bg-gray-900/50",children:[(0,n.jsxs)(i.Ol,{children:[(0,n.jsx)(i.ll,{children:"Varsler"}),(0,n.jsx)(i.SZ,{children:"Administrer dine varslingsinnstillinger"})]}),(0,n.jsxs)(i.aY,{className:"space-y-4",children:[y&&(0,n.jsx)("p",{className:"text-red-500 text-sm",children:y}),w&&(0,n.jsx)("p",{className:"text-green-500 text-sm",children:w}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"font-medium",children:"E-postvarsler"}),(0,n.jsx)("p",{className:"text-sm text-gray-400",children:"Motta varsler via e-post"})]}),(0,n.jsx)(C,{checked:d.email,onCheckedChange:e=>u({...d,email:e})})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"font-medium",children:"Markedsf\xf8ring"}),(0,n.jsx)("p",{className:"text-sm text-gray-400",children:"Motta markedsf\xf8ringsinnhold"})]}),(0,n.jsx)(C,{checked:d.marketing,onCheckedChange:e=>u({...d,marketing:e})})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"font-medium",children:"Oppdateringer"}),(0,n.jsx)("p",{className:"text-sm text-gray-400",children:"Motta oppdateringer om nye funksjoner"})]}),(0,n.jsx)(C,{checked:d.updates,onCheckedChange:e=>u({...d,updates:e})})]}),(0,n.jsx)(a.z,{className:"mt-4 bg-orange-500 hover:bg-orange-600",onClick:V,disabled:_,children:_?"Lagrer...":"Lagre innstillinger"})]})]})}),(0,n.jsx)(T.nU,{value:"security",children:(0,n.jsxs)(i.Zb,{className:"border-gray-800 bg-gray-900/50",children:[(0,n.jsxs)(i.Ol,{children:[(0,n.jsx)(i.ll,{children:"Sikkerhet"}),(0,n.jsx)(i.SZ,{children:"Administrer dine sikkerhetsinnstillinger"})]}),(0,n.jsxs)(i.aY,{className:"space-y-4",children:[y&&(0,n.jsx)("p",{className:"text-red-500 text-sm",children:y}),w&&(0,n.jsx)("p",{className:"text-green-500 text-sm",children:w}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(l._,{htmlFor:"current-password",children:"N\xe5v\xe6rende passord"}),(0,n.jsx)(o.I,{id:"current-password",type:"password",className:"bg-gray-950/50",value:f,onChange:e=>m(e.target.value)})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(l._,{htmlFor:"new-password",children:"Nytt passord"}),(0,n.jsx)(o.I,{id:"new-password",type:"password",className:"bg-gray-950/50",value:g,onChange:e=>p(e.target.value)})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(l._,{htmlFor:"confirm-password",children:"Bekreft nytt passord"}),(0,n.jsx)(o.I,{id:"confirm-password",type:"password",className:"bg-gray-950/50",value:h,onChange:e=>v(e.target.value)})]}),(0,n.jsx)(a.z,{onClick:D,disabled:b,className:"mt-4 bg-orange-500 hover:bg-orange-600",children:b?"Oppdaterer...":"Oppdater passord"})]})]})})]})]})}},5754:function(e,t,r){"use strict";r.d(t,{z:function(){return c}});var n=r(7437),s=r(2265),a=r(7256),i=r(6061),o=r(1657);let l=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-blue-600 text-white hover:bg-blue-700",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:r,variant:s,size:i,asChild:c=!1,...d}=e,u=c?a.g7:"button";return(0,n.jsx)(u,{className:(0,o.cn)(l({variant:s,size:i,className:r})),ref:t,...d})});c.displayName="Button"},7815:function(e,t,r){"use strict";r.d(t,{Ol:function(){return o},SZ:function(){return c},Zb:function(){return i},aY:function(){return d},eW:function(){return u},ll:function(){return l}});var n=r(7437),s=r(2265),a=r(1657);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});i.displayName="Card";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",r),...s})});o.displayName="CardHeader";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});l.displayName="CardTitle";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",r),...s})});c.displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",r),...s})});d.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",r),...s})});u.displayName="CardFooter"},5179:function(e,t,r){"use strict";r.d(t,{I:function(){return i}});var n=r(7437),s=r(2265),a=r(1657);let i=s.forwardRef((e,t)=>{let{className:r,type:s,...i}=e;return(0,n.jsx)("input",{type:s,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...i})});i.displayName="Input"},9842:function(e,t,r){"use strict";r.d(t,{_:function(){return c}});var n=r(7437),s=r(2265),a=r(6743),i=r(6061),o=r(1657);let l=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(a.f,{ref:t,className:(0,o.cn)(l(),r),...s})});c.displayName=a.f.displayName},110:function(e,t,r){"use strict";r.d(t,{SP:function(){return c},dr:function(){return l},mQ:function(){return o},nU:function(){return d}});var n=r(7437),s=r(2265),a=r(4522),i=r(1657);let o=a.fC,l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(a.aV,{ref:t,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",r),...s})});l.displayName=a.aV.displayName;let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(a.xz,{ref:t,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",r),...s})});c.displayName=a.xz.displayName;let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(a.VY,{ref:t,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...s})});d.displayName=a.VY.displayName},8333:function(e,t,r){"use strict";r.r(t),r.d(t,{AuthProvider:function(){return f},useAuth:function(){return m}});var n=r(7437),s=r(2265),a=r(7013),i=r(4033),o=r(1657);let l=(0,s.createContext)({user:null,sessionToken:null,userRole:null,login:async()=>{},logout:async()=>{},checkAuth:async()=>({isLoggedIn:!1,user:null}),createTestSession:async()=>{}}),c={id:"test-user-id",email:"test@example.com",user_metadata:{full_name:"Test User"},app_metadata:{},aud:"authenticated",created_at:new Date().toISOString(),role:"admin"},d=()=>"test_"+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),u=e=>{var t;if("undefined"==typeof document)return null;let r="; ".concat(document.cookie).split("; ".concat(e,"="));return 2===r.length&&(null===(t=r.pop())||void 0===t?void 0:t.split(";").shift())||null},f=e=>{let{children:t,serverSession:r=null}=e,[f,m]=(0,s.useState)(null),[g,p]=(0,s.useState)(null),[h,v]=(0,s.useState)(null),[b]=(0,s.useState)(()=>(0,a.createClientComponentClient)()),x=(0,i.useRouter)(),y=(0,s.useRef)(!1),k=(0,s.useCallback)(async e=>{if(!e||!e.email)return null;try{var t;let r=await fetch("/api/stripe/create-customer-for-user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e.id,email:e.email,name:(null===(t=e.user_metadata)||void 0===t?void 0:t.full_name)||e.email.split("@")[0]})});if(!r.ok){let e=await r.text();return console.error("Failed to create Stripe customer:",e),null}let{customerId:n}=await r.json();return n}catch(e){return console.error("Error ensuring Stripe customer:",e),null}},[]),w=(0,s.useCallback)(async()=>{console.log("Checking auth state..."),"authenticated"===u("session")&&console.log("Found authenticated session cookie");let e=(0,o.$o)("testSession");if(e)try{return console.log("Found test session:",e),m(e.user),p(e.token),v(e.user.role||"customer"),document.cookie="hasTestSession=true; path=/",{isLoggedIn:!0,user:e.user}}catch(e){console.error("Error parsing test session:",e),(0,o.dZ)("testSession")}let{data:{session:t}}=await b.auth.getSession();if(console.log("Auth session:",t?"Exists":"None"),t){console.log("Setting logged in state to true"),m(t.user),p(t.access_token),document.cookie="session=authenticated; path=/; max-age=".concat(604800,"; SameSite=Strict; Secure");try{let{data:e,error:r}=await b.from("profiles").select("role").eq("id",t.user.id).single();!r&&e?v(e.role||"customer"):v("customer")}catch(e){console.error("Error fetching user role:",e),v("customer")}k(t.user)}else console.log("Setting logged in state to false"),m(null),p(null),v(null),document.cookie="session=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT; SameSite=Strict; Secure";return{isLoggedIn:!!t,user:(null==t?void 0:t.user)||null}},[b.auth,k]);(0,s.useEffect)(()=>{y.current||(w(),y.current=!0)},[w]),(0,s.useEffect)(()=>{let{data:{subscription:e}}=b.auth.onAuthStateChange(async(e,t)=>{console.log("Auth state changed:",{event:e,session:t}),t?(console.log("Auth state change: User logged in"),m(t.user),p(t.access_token),(0,o.qQ)("sessionToken",t.access_token),document.cookie="session=authenticated; path=/; max-age=".concat(604800,"; SameSite=Strict; Secure")):(0,o.$o)("testSession")||(console.log("Auth state change: User logged out"),m(null),p(null),(0,o.dZ)("sessionToken"),document.cookie="session=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT; SameSite=Strict; Secure")});return()=>{e.unsubscribe()}},[b.auth]);let S=async()=>{console.log("Creating test session");let e=d(),t={user:{...c,role:"admin"},token:e,created_at:new Date().toISOString()};(0,o.qQ)("testSession",t),(0,o.qQ)("sessionToken",e),document.cookie="hasTestSession=true; path=/; SameSite=Strict; Secure",document.cookie="session=authenticated; path=/; max-age=".concat(604800,"; SameSite=Strict; Secure"),m(c),p(e),v("admin"),console.log("Test session created:",t)},j=async(e,t)=>{console.log("Attempting login with email:",e);try{await new Promise(e=>setTimeout(e,500));let{data:r,error:n}=await b.auth.signInWithPassword({email:e,password:t});if(n)throw console.error("Login error:",n),n;console.log("Login successful:",r.session?"Session exists":"No session"),r.session&&(m(r.session.user),p(r.session.access_token),(0,o.qQ)("sessionToken",r.session.access_token),document.cookie="session=authenticated; path=/; max-age=".concat(604800,"; SameSite=Strict; Secure"),console.log("Auth state updated after login"))}catch(e){throw console.error("Login process error:",e),e}},N=async()=>{(0,o.dZ)("testSession"),(0,o.dZ)("sessionToken"),document.cookie="hasTestSession=false; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT; SameSite=Strict; Secure",document.cookie="session=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT; SameSite=Strict; Secure",await b.auth.signOut(),m(null),p(null),v(null),x.push("/")};return(0,n.jsx)(l.Provider,{value:{user:f,sessionToken:g,userRole:h,login:j,logout:N,checkAuth:w,createTestSession:S},children:t})},m=()=>{let e=(0,s.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},1657:function(e,t,r){"use strict";r.d(t,{$o:function(){return i},cn:function(){return a},dZ:function(){return l},qQ:function(){return o}});var n=r(7042),s=r(4769);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,n.W)(t))}function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{let r=localStorage.getItem(e);if(null===r)return t;return JSON.parse(r)}catch(r){return console.error('Error reading localStorage key "'.concat(e,'":'),r),t}}function o(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(t){console.error('Error setting localStorage key "'.concat(e,'":'),t)}}function l(e){try{localStorage.removeItem(e)}catch(t){console.error('Error removing localStorage key "'.concat(e,'":'),t)}}},6743:function(e,t,r){"use strict";r.d(t,{f:function(){return i}});var n=r(3428),s=r(2265),a=r(9381);let i=(0,s.forwardRef)((e,t)=>(0,s.createElement)(a.WV.label,(0,n.Z)({},e,{ref:t,onMouseDown:t=>{var r;null===(r=e.onMouseDown)||void 0===r||r.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault()}})))},4522:function(e,t,r){"use strict";r.d(t,{VY:function(){return E},aV:function(){return _},fC:function(){return N},xz:function(){return C}});var n=r(3428),s=r(2265),a=r(5744),i=r(6989),o=r(4356),l=r(5606),c=r(9381),d=r(5400),u=r(3763),f=r(966);let m="Tabs",[g,p]=(0,i.b)(m,[o.Pc]),h=(0,o.Pc)(),[v,b]=g(m),x=(0,s.forwardRef)((e,t)=>{let{__scopeTabs:r,value:a,onValueChange:i,defaultValue:o,orientation:l="horizontal",dir:m,activationMode:g="automatic",...p}=e,h=(0,d.gm)(m),[b,x]=(0,u.T)({prop:a,onChange:i,defaultProp:o});return(0,s.createElement)(v,{scope:r,baseId:(0,f.M)(),value:b,onValueChange:x,orientation:l,dir:h,activationMode:g},(0,s.createElement)(c.WV.div,(0,n.Z)({dir:h,"data-orientation":l},p,{ref:t})))}),y=(0,s.forwardRef)((e,t)=>{let{__scopeTabs:r,loop:a=!0,...i}=e,l=b("TabsList",r),d=h(r);return(0,s.createElement)(o.fC,(0,n.Z)({asChild:!0},d,{orientation:l.orientation,dir:l.dir,loop:a}),(0,s.createElement)(c.WV.div,(0,n.Z)({role:"tablist","aria-orientation":l.orientation},i,{ref:t})))}),k=(0,s.forwardRef)((e,t)=>{let{__scopeTabs:r,value:i,disabled:l=!1,...d}=e,u=b("TabsTrigger",r),f=h(r),m=S(u.baseId,i),g=j(u.baseId,i),p=i===u.value;return(0,s.createElement)(o.ck,(0,n.Z)({asChild:!0},f,{focusable:!l,active:p}),(0,s.createElement)(c.WV.button,(0,n.Z)({type:"button",role:"tab","aria-selected":p,"aria-controls":g,"data-state":p?"active":"inactive","data-disabled":l?"":void 0,disabled:l,id:m},d,{ref:t,onMouseDown:(0,a.M)(e.onMouseDown,e=>{l||0!==e.button||!1!==e.ctrlKey?e.preventDefault():u.onValueChange(i)}),onKeyDown:(0,a.M)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&u.onValueChange(i)}),onFocus:(0,a.M)(e.onFocus,()=>{let e="manual"!==u.activationMode;p||l||!e||u.onValueChange(i)})})))}),w=(0,s.forwardRef)((e,t)=>{let{__scopeTabs:r,value:a,forceMount:i,children:o,...d}=e,u=b("TabsContent",r),f=S(u.baseId,a),m=j(u.baseId,a),g=a===u.value,p=(0,s.useRef)(g);return(0,s.useEffect)(()=>{let e=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,s.createElement)(l.z,{present:i||g},({present:r})=>(0,s.createElement)(c.WV.div,(0,n.Z)({"data-state":g?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":f,hidden:!r,id:m,tabIndex:0},d,{ref:t,style:{...e.style,animationDuration:p.current?"0s":void 0}}),r&&o))});function S(e,t){return`${e}-trigger-${t}`}function j(e,t){return`${e}-content-${t}`}let N=x,_=y,C=k,E=w},5184:function(e,t,r){"use strict";r.d(t,{D:function(){return s}});var n=r(2265);function s(e){let t=(0,n.useRef)({value:e,previous:e});return(0,n.useMemo)(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}}},function(e){e.O(0,[412,599,317,906,971,938,744],function(){return e(e.s=5515)}),_N_E=e.O()}]);