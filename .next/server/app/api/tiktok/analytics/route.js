"use strict";(()=>{var e={};e.id=9899,e.ids=[9899],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},66164:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>h,originalPathname:()=>_,patchFetch:()=>m,requestAsyncStorage:()=>d,routeModule:()=>l,serverHooks:()=>k,staticGenerationAsyncStorage:()=>p,staticGenerationBailout:()=>f});var o={};r.r(o),r.d(o,{GET:()=>c});var a=r(95419),i=r(69108),n=r(99678),s=r(78070),u=r(32455);async function c(){let e=(0,u.cookies)(),t=e.get("tiktok_access_token")?.value;if(!t)return s.Z.json({error:"User not authenticated or access token missing. Please log in with TikTok.",isAuthenticated:!1},{status:401});try{let r=await fetch("https://open.tiktokapis.com/v2/user/info/?fields=open_id,union_id,avatar_url,display_name,bio_description,is_verified,follower_count,following_count,likes_count,video_count",{method:"GET",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!r.ok){let t=await r.json();if(console.error("TikTok API Error (User Info):",t),401===r.status||403===r.status)return e.delete("tiktok_access_token"),e.delete("tiktok_refresh_token"),e.delete("tiktok_open_id"),s.Z.json({error:"TikTok token invalid or expired. Please log in again.",isAuthenticated:!1,details:t},{status:401});return s.Z.json({error:"Failed to fetch user info from TikTok",isAuthenticated:!0,details:t},{status:r.status})}let o=await r.json();return s.Z.json({userData:o.data,isAuthenticated:!0})}catch(e){return console.error("Internal server error in /api/tiktok/analytics:",e),s.Z.json({error:"Internal server error",isAuthenticated:!0},{status:500})}}let l=new a.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/tiktok/analytics/route",pathname:"/api/tiktok/analytics",filename:"route",bundlePath:"app/api/tiktok/analytics/route"},resolvedPagePath:"/Users/alexanderamundsen/hepta/hepta-3/app/api/tiktok/analytics/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:d,staticGenerationAsyncStorage:p,serverHooks:k,headerHooks:h,staticGenerationBailout:f}=l,_="/api/tiktok/analytics/route";function m(){return(0,n.patchFetch)({serverHooks:k,staticGenerationAsyncStorage:p})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[1638,6206,2455],()=>r(66164));module.exports=o})();