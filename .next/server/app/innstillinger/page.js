(()=>{var e={};e.id=7090,e.ids=[7090],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},27027:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d});var a=t(50482),s=t(69108),n=t(62563),i=t.n(n),l=t(68300),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);t.d(r,o);let d=["",{children:["innstillinger",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,3274)),"/Users/alexanderamundsen/hepta/hepta-3/app/innstillinger/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,80261)),"/Users/alexanderamundsen/hepta/hepta-3/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,69361,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/alexanderamundsen/hepta/hepta-3/app/innstillinger/page.tsx"],u="/innstillinger/page",p={require:t,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/innstillinger/page",pathname:"/innstillinger",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},18587:(e,r,t)=>{Promise.resolve().then(t.bind(t,23525))},23525:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>M});var a=t(95344),s=t(3729),n=t(16212),i=t(61351),l=t(92549),o=t(54572),d=t(65651),c=t(85222),u=t(31405),p=t(98462),m=t(33183),f=t(92062),g=t(63085),h=t(62409);let x="Switch",[v,b]=(0,p.b)(x),[y,j]=v(x),w=(0,s.forwardRef)((e,r)=>{let{__scopeSwitch:t,name:a,checked:n,defaultChecked:i,required:l,disabled:o,value:p="on",onCheckedChange:f,...g}=e,[x,v]=(0,s.useState)(null),b=(0,u.e)(r,e=>v(e)),j=(0,s.useRef)(!1),w=!x||!!x.closest("form"),[k=!1,C]=(0,m.T)({prop:n,defaultProp:i,onChange:f});return(0,s.createElement)(y,{scope:t,checked:k,disabled:o},(0,s.createElement)(h.WV.button,(0,d.Z)({type:"button",role:"switch","aria-checked":k,"aria-required":l,"data-state":_(k),"data-disabled":o?"":void 0,disabled:o,value:p},g,{ref:b,onClick:(0,c.M)(e.onClick,e=>{C(e=>!e),w&&(j.current=e.isPropagationStopped(),j.current||e.stopPropagation())})})),w&&(0,s.createElement)(N,{control:x,bubbles:!j.current,name:a,value:p,checked:k,required:l,disabled:o,style:{transform:"translateX(-100%)"}}))}),k=(0,s.forwardRef)((e,r)=>{let{__scopeSwitch:t,...a}=e,n=j("SwitchThumb",t);return(0,s.createElement)(h.WV.span,(0,d.Z)({"data-state":_(n.checked),"data-disabled":n.disabled?"":void 0},a,{ref:r}))}),N=e=>{let{control:r,checked:t,bubbles:a=!0,...n}=e,i=(0,s.useRef)(null),l=(0,f.D)(t),o=(0,g.t)(r);return(0,s.useEffect)(()=>{let e=i.current,r=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(l!==t&&r){let s=new Event("click",{bubbles:a});r.call(e,t),e.dispatchEvent(s)}},[l,t,a]),(0,s.createElement)("input",(0,d.Z)({type:"checkbox","aria-hidden":!0,defaultChecked:t},n,{tabIndex:-1,ref:i,style:{...e.style,...o,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function _(e){return e?"checked":"unchecked"}var C=t(91626);let P=s.forwardRef(({className:e,...r},t)=>a.jsx(w,{className:(0,C.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...r,ref:t,children:a.jsx(k,{className:(0,C.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));P.displayName=w.displayName;var q=t(9046),S=t(25757),E=t(17687);function M(){let{user:e}=(0,q.useAuth)(),r=(0,E.createClientComponentClient)(),[t,d]=(0,s.useState)({name:"",company:""}),[c,u]=(0,s.useState)({email:!0,marketing:!1,updates:!0}),[p,m]=(0,s.useState)(""),[f,g]=(0,s.useState)(""),[h,x]=(0,s.useState)(""),[v,b]=(0,s.useState)(!1),[y,j]=(0,s.useState)(null),[w,k]=(0,s.useState)(null),[N,_]=(0,s.useState)(!1),[C,M]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(async()=>{if(e)try{console.log("Henter profil for bruker med ID:",e.id);let{data:t,error:a}=await r.from("profiles").select("name, company, notifications, stripe_customer_id, role").eq("user_id",e.id).single();if(a){console.error("Feil ved henting av profil:",a);let{count:t,error:s}=await r.from("profiles").select("*",{count:"exact",head:!0}).eq("user_id",e.id);if(s){console.error("Feil ved sjekk av profil:",s);return}if(0===t){console.log("Profil eksisterer ikke, oppretter ny");let{error:t}=await r.from("profiles").insert({user_id:e.id,name:"",company:"",notifications:{email:!0,marketing:!1,updates:!0},updated_at:new Date});t&&console.error("Feil ved opprettelse av profil:",t)}return}t&&(console.log("Mottok profildata:",t),d({name:t.name||"",company:t.company||""}),t.notifications&&(console.log("Setter notifications:",t.notifications),u(t.notifications)))}catch(e){console.error("Feil ved henting av brukerdata:",e)}})()},[e,r]);let R=e=>{let{id:r,value:t}=e.target;d(e=>({...e,[r]:t}))},D=async()=>{if(e){_(!0),j(null),k(null);try{let a;let{count:s,error:n}=await r.from("profiles").select("*",{count:"exact",head:!0}).eq("user_id",e.id);if(n)throw n;if(0===s){let{error:s}=await r.from("profiles").insert({user_id:e.id,name:t.name,company:t.company,notifications:c,updated_at:new Date});a=s}else{let{error:s}=await r.from("profiles").update({name:t.name,company:t.company,updated_at:new Date}).eq("user_id",e.id);a=s}if(a)throw console.error("Feil ved lagring:",a),a;k("Profilinformasjon lagret!")}catch(e){console.error("Feil ved lagring av profildata:",e),j("Kunne ikke lagre profilinformasjon.")}finally{_(!1)}}},F=async()=>{if(e){M(!0),j(null),k(null);try{let t;console.log("Lagrer varslingsinnstillinger:",c);let{count:a,error:s}=await r.from("profiles").select("*",{count:"exact",head:!0}).eq("user_id",e.id);if(s)throw s;if(0===a){let{error:a}=await r.from("profiles").insert({user_id:e.id,notifications:c,updated_at:new Date});t=a}else{let{error:a}=await r.from("profiles").update({notifications:c,updated_at:new Date}).eq("user_id",e.id);t=a}if(t)throw t;k("Varslingsinnstillinger lagret!")}catch(e){console.error("Feil ved lagring av varslingsinnstillinger:",e),j("Kunne ikke lagre varslingsinnstillinger.")}finally{M(!1)}}},V=async()=>{if(j(null),k(null),f!==h){j("Passordene er ikke like.");return}if(f.length<6){j("Passordet m\xe5 v\xe6re minst 6 tegn.");return}if(!p){j("Du m\xe5 skrive inn ditt n\xe5v\xe6rende passord.");return}b(!0);let{error:t}=await r.auth.signInWithPassword({email:e?.email||"",password:p});if(t){j("Feil n\xe5v\xe6rende passord."),b(!1);return}let{error:a}=await r.auth.updateUser({password:f});b(!1),a?(console.error("Feil ved oppdatering av passord:",a.message),j("Kunne ikke oppdatere passordet.")):(k("Passordet er oppdatert!"),g(""),x(""),m(""))};return(0,a.jsxs)("div",{className:"space-y-8",children:[a.jsx("h1",{className:"text-4xl font-bold",children:"Innstillinger"}),(0,a.jsxs)(S.mQ,{defaultValue:"profile",className:"w-full",children:[(0,a.jsxs)(S.dr,{className:"mb-6",children:[a.jsx(S.SP,{value:"profile",children:"Profil"}),a.jsx(S.SP,{value:"notifications",children:"Varsler"}),a.jsx(S.SP,{value:"security",children:"Sikkerhet"})]}),a.jsx(S.nU,{value:"profile",children:(0,a.jsxs)(i.Zb,{className:"border-gray-800 bg-gray-900/50",children:[(0,a.jsxs)(i.Ol,{children:[a.jsx(i.ll,{children:"Profil"}),a.jsx(i.SZ,{children:"Administrer din profilinformasjon"})]}),(0,a.jsxs)(i.aY,{className:"space-y-4",children:[y&&a.jsx("p",{className:"text-red-500 text-sm",children:y}),w&&a.jsx("p",{className:"text-green-500 text-sm",children:w}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(o._,{htmlFor:"email",children:"E-post"}),a.jsx(l.I,{id:"email",defaultValue:e?.email||"",readOnly:!0,className:"bg-gray-950/50"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(o._,{htmlFor:"name",children:"Navn"}),a.jsx(l.I,{id:"name",placeholder:"Ditt navn",className:"bg-gray-950/50",value:t.name,onChange:R})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(o._,{htmlFor:"company",children:"Selskap"}),a.jsx(l.I,{id:"company",placeholder:"Ditt selskap",className:"bg-gray-950/50",value:t.company,onChange:R})]}),a.jsx(n.z,{className:"mt-4 bg-orange-500 hover:bg-orange-600",onClick:D,disabled:N,children:N?"Lagrer...":"Lagre endringer"})]})]})}),a.jsx(S.nU,{value:"notifications",children:(0,a.jsxs)(i.Zb,{className:"border-gray-800 bg-gray-900/50",children:[(0,a.jsxs)(i.Ol,{children:[a.jsx(i.ll,{children:"Varsler"}),a.jsx(i.SZ,{children:"Administrer dine varslingsinnstillinger"})]}),(0,a.jsxs)(i.aY,{className:"space-y-4",children:[y&&a.jsx("p",{className:"text-red-500 text-sm",children:y}),w&&a.jsx("p",{className:"text-green-500 text-sm",children:w}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-medium",children:"E-postvarsler"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Motta varsler via e-post"})]}),a.jsx(P,{checked:c.email,onCheckedChange:e=>u({...c,email:e})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-medium",children:"Markedsf\xf8ring"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Motta markedsf\xf8ringsinnhold"})]}),a.jsx(P,{checked:c.marketing,onCheckedChange:e=>u({...c,marketing:e})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-medium",children:"Oppdateringer"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Motta oppdateringer om nye funksjoner"})]}),a.jsx(P,{checked:c.updates,onCheckedChange:e=>u({...c,updates:e})})]}),a.jsx(n.z,{className:"mt-4 bg-orange-500 hover:bg-orange-600",onClick:F,disabled:C,children:C?"Lagrer...":"Lagre innstillinger"})]})]})}),a.jsx(S.nU,{value:"security",children:(0,a.jsxs)(i.Zb,{className:"border-gray-800 bg-gray-900/50",children:[(0,a.jsxs)(i.Ol,{children:[a.jsx(i.ll,{children:"Sikkerhet"}),a.jsx(i.SZ,{children:"Administrer dine sikkerhetsinnstillinger"})]}),(0,a.jsxs)(i.aY,{className:"space-y-4",children:[y&&a.jsx("p",{className:"text-red-500 text-sm",children:y}),w&&a.jsx("p",{className:"text-green-500 text-sm",children:w}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(o._,{htmlFor:"current-password",children:"N\xe5v\xe6rende passord"}),a.jsx(l.I,{id:"current-password",type:"password",className:"bg-gray-950/50",value:p,onChange:e=>m(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(o._,{htmlFor:"new-password",children:"Nytt passord"}),a.jsx(l.I,{id:"new-password",type:"password",className:"bg-gray-950/50",value:f,onChange:e=>g(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(o._,{htmlFor:"confirm-password",children:"Bekreft nytt passord"}),a.jsx(l.I,{id:"confirm-password",type:"password",className:"bg-gray-950/50",value:h,onChange:e=>x(e.target.value)})]}),a.jsx(n.z,{onClick:V,disabled:v,className:"mt-4 bg-orange-500 hover:bg-orange-600",children:v?"Oppdaterer...":"Oppdater passord"})]})]})})]})]})}},61351:(e,r,t)=>{"use strict";t.d(r,{Ol:()=>l,SZ:()=>d,Zb:()=>i,aY:()=>c,eW:()=>u,ll:()=>o});var a=t(95344),s=t(3729),n=t(91626);let i=s.forwardRef(({className:e,...r},t)=>a.jsx("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...r}));i.displayName="Card";let l=s.forwardRef(({className:e,...r},t)=>a.jsx("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...r}));l.displayName="CardHeader";let o=s.forwardRef(({className:e,...r},t)=>a.jsx("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",e),...r}));o.displayName="CardTitle";let d=s.forwardRef(({className:e,...r},t)=>a.jsx("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",e),...r}));d.displayName="CardDescription";let c=s.forwardRef(({className:e,...r},t)=>a.jsx("div",{ref:t,className:(0,n.cn)("p-6 pt-0",e),...r}));c.displayName="CardContent";let u=s.forwardRef(({className:e,...r},t)=>a.jsx("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",e),...r}));u.displayName="CardFooter"},54572:(e,r,t)=>{"use strict";t.d(r,{_:()=>u});var a=t(95344),s=t(3729),n=t(65651),i=t(62409);let l=(0,s.forwardRef)((e,r)=>(0,s.createElement)(i.WV.label,(0,n.Z)({},e,{ref:r,onMouseDown:r=>{var t;null===(t=e.onMouseDown)||void 0===t||t.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault()}})));var o=t(49247),d=t(91626);let c=(0,o.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),u=s.forwardRef(({className:e,...r},t)=>a.jsx(l,{ref:t,className:(0,d.cn)(c(),e),...r}));u.displayName=l.displayName},25757:(e,r,t)=>{"use strict";t.d(r,{mQ:()=>P,nU:()=>E,dr:()=>q,SP:()=>S});var a=t(95344),s=t(3729),n=t(65651),i=t(85222),l=t(98462),o=t(34504),d=t(43234),c=t(62409),u=t(3975),p=t(33183),m=t(99048);let f="Tabs",[g,h]=(0,l.b)(f,[o.Pc]),x=(0,o.Pc)(),[v,b]=g(f),y=(0,s.forwardRef)((e,r)=>{let{__scopeTabs:t,value:a,onValueChange:i,defaultValue:l,orientation:o="horizontal",dir:d,activationMode:f="automatic",...g}=e,h=(0,u.gm)(d),[x,b]=(0,p.T)({prop:a,onChange:i,defaultProp:l});return(0,s.createElement)(v,{scope:t,baseId:(0,m.M)(),value:x,onValueChange:b,orientation:o,dir:h,activationMode:f},(0,s.createElement)(c.WV.div,(0,n.Z)({dir:h,"data-orientation":o},g,{ref:r})))}),j=(0,s.forwardRef)((e,r)=>{let{__scopeTabs:t,loop:a=!0,...i}=e,l=b("TabsList",t),d=x(t);return(0,s.createElement)(o.fC,(0,n.Z)({asChild:!0},d,{orientation:l.orientation,dir:l.dir,loop:a}),(0,s.createElement)(c.WV.div,(0,n.Z)({role:"tablist","aria-orientation":l.orientation},i,{ref:r})))}),w=(0,s.forwardRef)((e,r)=>{let{__scopeTabs:t,value:a,disabled:l=!1,...d}=e,u=b("TabsTrigger",t),p=x(t),m=N(u.baseId,a),f=_(u.baseId,a),g=a===u.value;return(0,s.createElement)(o.ck,(0,n.Z)({asChild:!0},p,{focusable:!l,active:g}),(0,s.createElement)(c.WV.button,(0,n.Z)({type:"button",role:"tab","aria-selected":g,"aria-controls":f,"data-state":g?"active":"inactive","data-disabled":l?"":void 0,disabled:l,id:m},d,{ref:r,onMouseDown:(0,i.M)(e.onMouseDown,e=>{l||0!==e.button||!1!==e.ctrlKey?e.preventDefault():u.onValueChange(a)}),onKeyDown:(0,i.M)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&u.onValueChange(a)}),onFocus:(0,i.M)(e.onFocus,()=>{let e="manual"!==u.activationMode;g||l||!e||u.onValueChange(a)})})))}),k=(0,s.forwardRef)((e,r)=>{let{__scopeTabs:t,value:a,forceMount:i,children:l,...o}=e,u=b("TabsContent",t),p=N(u.baseId,a),m=_(u.baseId,a),f=a===u.value,g=(0,s.useRef)(f);return(0,s.useEffect)(()=>{let e=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,s.createElement)(d.z,{present:i||f},({present:t})=>(0,s.createElement)(c.WV.div,(0,n.Z)({"data-state":f?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":p,hidden:!t,id:m,tabIndex:0},o,{ref:r,style:{...e.style,animationDuration:g.current?"0s":void 0}}),t&&l))});function N(e,r){return`${e}-trigger-${r}`}function _(e,r){return`${e}-content-${r}`}var C=t(91626);let P=y,q=s.forwardRef(({className:e,...r},t)=>a.jsx(j,{ref:t,className:(0,C.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...r}));q.displayName=j.displayName;let S=s.forwardRef(({className:e,...r},t)=>a.jsx(w,{ref:t,className:(0,C.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...r}));S.displayName=w.displayName;let E=s.forwardRef(({className:e,...r},t)=>a.jsx(k,{ref:t,className:(0,C.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...r}));E.displayName=k.displayName},3274:(e,r,t)=>{"use strict";t.r(r),t.d(r,{$$typeof:()=>n,__esModule:()=>s,default:()=>i});let a=(0,t(86843).createProxy)(String.raw`/Users/alexanderamundsen/hepta/hepta-3/app/innstillinger/page.tsx`),{__esModule:s,$$typeof:n}=a,i=a.default},92062:(e,r,t)=>{"use strict";t.d(r,{D:()=>s});var a=t(3729);function s(e){let r=(0,a.useRef)({value:e,previous:e});return(0,a.useMemo)(()=>(r.current.value!==e&&(r.current.previous=r.current.value,r.current.value=e),r.current.previous),[e])}}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[1638,6702,9993,4582],()=>t(27027));module.exports=a})();