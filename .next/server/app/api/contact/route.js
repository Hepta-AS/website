"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/contact/route";
exports.ids = ["app/api/contact/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("child_process");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "dns":
/*!**********************!*\
  !*** external "dns" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("dns");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("net");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcontact%2Froute&page=%2Fapi%2Fcontact%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcontact%2Froute.ts&appDir=%2FUsers%2Falexanderamundsen%2FWebstormProjects%2Fwasd%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Falexanderamundsen%2FWebstormProjects%2Fwasd&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcontact%2Froute&page=%2Fapi%2Fcontact%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcontact%2Froute.ts&appDir=%2FUsers%2Falexanderamundsen%2FWebstormProjects%2Fwasd%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Falexanderamundsen%2FWebstormProjects%2Fwasd&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_alexanderamundsen_WebstormProjects_wasd_app_api_contact_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/contact/route.ts */ \"(rsc)/./app/api/contact/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/contact/route\",\n        pathname: \"/api/contact\",\n        filename: \"route\",\n        bundlePath: \"app/api/contact/route\"\n    },\n    resolvedPagePath: \"/Users/alexanderamundsen/WebstormProjects/wasd/app/api/contact/route.ts\",\n    nextConfigOutput,\n    userland: _Users_alexanderamundsen_WebstormProjects_wasd_app_api_contact_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/contact/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZjb250YWN0JTJGcm91dGUmcGFnZT0lMkZhcGklMkZjb250YWN0JTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGY29udGFjdCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmFsZXhhbmRlcmFtdW5kc2VuJTJGV2Vic3Rvcm1Qcm9qZWN0cyUyRndhc2QlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGYWxleGFuZGVyYW11bmRzZW4lMkZXZWJzdG9ybVByb2plY3RzJTJGd2FzZCZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDdUI7QUFDcEc7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oZXB0YS1kYXNoYm9hcmQvPzFkNzYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL2FsZXhhbmRlcmFtdW5kc2VuL1dlYnN0b3JtUHJvamVjdHMvd2FzZC9hcHAvYXBpL2NvbnRhY3Qvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2NvbnRhY3Qvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9jb250YWN0XCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9jb250YWN0L3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL2FsZXhhbmRlcmFtdW5kc2VuL1dlYnN0b3JtUHJvamVjdHMvd2FzZC9hcHAvYXBpL2NvbnRhY3Qvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2NvbnRhY3Qvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcontact%2Froute&page=%2Fapi%2Fcontact%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcontact%2Froute.ts&appDir=%2FUsers%2Falexanderamundsen%2FWebstormProjects%2Fwasd%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Falexanderamundsen%2FWebstormProjects%2Fwasd&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/contact/route.ts":
/*!**********************************!*\
  !*** ./app/api/contact/route.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OPTIONS: () => (/* binding */ OPTIONS),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var nodemailer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! nodemailer */ \"(rsc)/./node_modules/nodemailer/lib/nodemailer.js\");\n// Enhanced logging for app/api/contact/route.ts\n\n\nasync function POST(request) {\n    console.log(\"API: Contact endpoint hit\");\n    try {\n        // Parse request body\n        let body;\n        try {\n            body = await request.json();\n            console.log(\"API: Request body parsed:\", body);\n        } catch (parseError) {\n            console.error(\"API: Error parsing request JSON:\", parseError);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Ugyldig foresp\\xf8rselsformat\",\n                success: false\n            }, {\n                status: 400\n            });\n        }\n        // Handle test requests\n        if (body.test === true) {\n            console.log(\"API: Test request detected\");\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                test: true,\n                message: \"API endpoint is working\"\n            });\n        }\n        // Get all form data\n        const { name, email, message, firstName, lastName, company, website, phone } = body;\n        // Validate required fields - keep compatibility with the original required fields\n        if (!name || !email || !message) {\n            console.log(\"API: Missing required fields\");\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Alle feltene m\\xe5 fylles ut\",\n                success: false\n            }, {\n                status: 400\n            });\n        }\n        // ENHANCED LOGGING: Log all environment variables related to email (except password)\n        console.log(\"API: All email-related environment variables:\", {\n            EMAIL_HOST: process.env.EMAIL_HOST,\n            EMAIL_PORT: process.env.EMAIL_PORT,\n            EMAIL_USER: process.env.EMAIL_USER,\n            EMAIL_FROM: process.env.EMAIL_FROM,\n            EMAIL_TO: process.env.EMAIL_TO,\n            EMAIL_SECURE: process.env.EMAIL_SECURE,\n            EMAIL_PASS: process.env.EMAIL_PASS ? \"[PROVIDED]\" : \"[NOT PROVIDED]\",\n            EMAIL_PASSWORD: process.env.EMAIL_PASSWORD ? \"[PROVIDED]\" : \"[NOT PROVIDED]\",\n            NODE_ENV: \"development\"\n        });\n        // Get email configuration from environment variables\n        const emailUser = process.env.EMAIL_USER || \"hey@hepta.biz\";\n        // ENHANCED: Try both password variables\n        const emailPassword = process.env.EMAIL_PASSWORD || process.env.EMAIL_PASS;\n        const emailHost = process.env.EMAIL_HOST || \"smtp-relay2.webhuset.no\";\n        const emailPort = parseInt(process.env.EMAIL_PORT || \"587\", 10);\n        const emailSecure = process.env.EMAIL_SECURE === \"true\" || emailPort === 465;\n        // Log configuration (without the password)\n        console.log(\"API: Email configuration after processing:\", {\n            host: emailHost,\n            port: emailPort,\n            secure: emailSecure,\n            user: emailUser,\n            hasPassword: !!emailPassword\n        });\n        // ENHANCED: Log mode decision\n        const isDevelopmentMode = \"development\" === \"development\";\n        const shouldUseEthereal = isDevelopmentMode && !emailPassword;\n        console.log(`API: Current mode: ${isDevelopmentMode ? \"DEVELOPMENT\" : \"PRODUCTION\"}`);\n        console.log(`API: Will use Ethereal testing: ${shouldUseEthereal ? \"YES\" : \"NO\"}`);\n        // Set up the SMTP transport\n        console.log(\"API: Creating nodemailer transporter\");\n        // For Webhuset, we need proper authentication\n        console.log(\"API: Transport options:\", {\n            host: emailHost,\n            port: emailPort,\n            secure: emailSecure,\n            auth: {\n                user: emailUser,\n                pass: emailPassword ? \"[HIDDEN]\" : \"[MISSING]\"\n            }\n        });\n        // Create transporter\n        const transportOptions = {\n            host: emailHost,\n            port: emailPort,\n            secure: emailSecure,\n            auth: {\n                user: emailUser,\n                pass: emailPassword\n            },\n            // ENHANCED: Add debug mode to see detailed SMTP conversation\n            debug: true,\n            logger: true\n        };\n        const transporter = nodemailer__WEBPACK_IMPORTED_MODULE_1__.createTransport(transportOptions);\n        // Use Ethereal in development mode if no password is provided\n        if (shouldUseEthereal) {\n            console.log(\"API: In development mode without password, using Ethereal test account\");\n            try {\n                const testAccount = await nodemailer__WEBPACK_IMPORTED_MODULE_1__.createTestAccount();\n                console.log(\"API: Created test account:\", testAccount.user);\n                const testTransporter = nodemailer__WEBPACK_IMPORTED_MODULE_1__.createTransport({\n                    host: \"smtp.ethereal.email\",\n                    port: 587,\n                    secure: false,\n                    auth: {\n                        user: testAccount.user,\n                        pass: testAccount.pass\n                    },\n                    debug: true\n                });\n                // Format message with all available fields\n                const formattedMessage = formatMessageWithAllFields({\n                    message,\n                    firstName,\n                    lastName,\n                    company,\n                    website,\n                    phone\n                });\n                // ENHANCED: Log mail options\n                const mailOptions = {\n                    from: `Hepta <${emailUser}>`,\n                    to: emailUser,\n                    subject: `Kontaktskjema: ${name}`,\n                    text: `Navn: ${name}\\nE-post: ${email}\\nTelefon: ${phone || \"Ikke oppgitt\"}\\n${formattedMessage}`\n                };\n                console.log(\"API: Sending test email with options:\", {\n                    from: mailOptions.from,\n                    to: mailOptions.to,\n                    subject: mailOptions.subject\n                });\n                // Send with test account\n                const info = await testTransporter.sendMail({\n                    ...mailOptions,\n                    html: `<div>\n                  <h2>Ny henvendelse</h2>\n                  <p><b>Navn:</b> ${name}</p>\n                  <p><b>E-post:</b> ${email}</p>\n                  ${phone ? `<p><b>Telefon:</b> ${phone}</p>` : \"\"}\n                  ${company ? `<p><b>Selskap:</b> ${company}</p>` : \"\"}\n                  ${website ? `<p><b>Nettside:</b> ${website}</p>` : \"\"}\n                  <p><b>Melding:</b></p>\n                  <div>${message.replace(/\\n/g, \"<br>\")}</div>\n                 </div>`\n                });\n                console.log(\"API: Test email sent:\", info.messageId);\n                console.log(\"API: Preview URL:\", nodemailer__WEBPACK_IMPORTED_MODULE_1__.getTestMessageUrl(info));\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: true,\n                    testMode: true,\n                    previewUrl: nodemailer__WEBPACK_IMPORTED_MODULE_1__.getTestMessageUrl(info),\n                    message: \"E-post sendt i testmodus. Sjekk serveren for forh\\xe5ndsvisningslenke.\"\n                });\n            } catch (testError) {\n                console.error(\"API: Test account failed:\", testError);\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"Kunne ikke opprette testkonto for e-post\",\n                    details: String(testError),\n                    success: false\n                }, {\n                    status: 500\n                });\n            }\n        }\n        // Try to send the email via configured SMTP\n        try {\n            console.log(\"API: Attempting to verify SMTP connection\");\n            try {\n                await transporter.verify();\n                console.log(\"API: SMTP connection verified successfully\");\n            } catch (verifyError) {\n                console.error(\"API: SMTP verification failed with error:\", verifyError);\n                throw verifyError;\n            }\n            // Send the actual email\n            console.log(\"API: Proceeding to send email with verified connection\");\n            return await sendEmail(transporter, {\n                name,\n                email,\n                message,\n                firstName,\n                lastName,\n                company,\n                website,\n                phone\n            }, emailUser);\n        } catch (verifyError) {\n            console.error(\"API: SMTP verification or sending failed:\", verifyError);\n            // TRY ALTERNATIVE APPROACH: Try sending without verification first\n            console.log(\"API: Trying alternative approach - sending without verification\");\n            try {\n                return await sendEmail(transporter, {\n                    name,\n                    email,\n                    message,\n                    firstName,\n                    lastName,\n                    company,\n                    website,\n                    phone\n                }, emailUser);\n            } catch (sendError) {\n                console.error(\"API: Alternative approach also failed:\", sendError);\n                // ENHANCED: Try without auth if this is Webhuset relay server\n                if (emailHost.includes(\"webhuset\")) {\n                    console.log(\"API: Trying one more approach - Webhuset relay without auth\");\n                    try {\n                        const noAuthTransporter = nodemailer__WEBPACK_IMPORTED_MODULE_1__.createTransport({\n                            host: emailHost,\n                            port: emailPort,\n                            secure: emailSecure,\n                            // No auth for webhuset relay as per their docs\n                            debug: true\n                        });\n                        return await sendEmail(noAuthTransporter, {\n                            name,\n                            email,\n                            message,\n                            firstName,\n                            lastName,\n                            company,\n                            website,\n                            phone\n                        }, emailUser);\n                    } catch (noAuthError) {\n                        console.error(\"API: Even no-auth approach failed:\", noAuthError);\n                    }\n                }\n            }\n            // If we're in development and the real SMTP fails, try Ethereal as fallback\n            if (isDevelopmentMode) {\n                console.log(\"API: SMTP failed in development, falling back to Ethereal\");\n                try {\n                    const testAccount = await nodemailer__WEBPACK_IMPORTED_MODULE_1__.createTestAccount();\n                    const testTransporter = nodemailer__WEBPACK_IMPORTED_MODULE_1__.createTransport({\n                        host: \"smtp.ethereal.email\",\n                        port: 587,\n                        secure: false,\n                        auth: {\n                            user: testAccount.user,\n                            pass: testAccount.pass\n                        }\n                    });\n                    // Format message with all available fields\n                    const formattedMessage = formatMessageWithAllFields({\n                        message,\n                        firstName,\n                        lastName,\n                        company,\n                        website,\n                        phone\n                    });\n                    // Send with test account\n                    const info = await testTransporter.sendMail({\n                        from: `Hepta <${emailUser}>`,\n                        to: emailUser,\n                        subject: `Kontaktskjema: ${name}`,\n                        text: `Navn: ${name}\\nE-post: ${email}\\nTelefon: ${phone || \"Ikke oppgitt\"}\\n${formattedMessage}`,\n                        html: `<div>\n                    <h2>Ny henvendelse</h2>\n                    <p><b>Navn:</b> ${name}</p>\n                    <p><b>E-post:</b> ${email}</p>\n                    ${phone ? `<p><b>Telefon:</b> ${phone}</p>` : \"\"}\n                    ${company ? `<p><b>Selskap:</b> ${company}</p>` : \"\"}\n                    ${website ? `<p><b>Nettside:</b> ${website}</p>` : \"\"}\n                    <p><b>Melding:</b></p>\n                    <div>${message.replace(/\\n/g, \"<br>\")}</div>\n                   </div>`\n                    });\n                    console.log(\"API: Test email sent:\", info.messageId);\n                    console.log(\"API: Preview URL:\", nodemailer__WEBPACK_IMPORTED_MODULE_1__.getTestMessageUrl(info));\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                        success: true,\n                        testMode: true,\n                        previewUrl: nodemailer__WEBPACK_IMPORTED_MODULE_1__.getTestMessageUrl(info),\n                        message: \"E-post sendt i testmodus. Sjekk serveren for forh\\xe5ndsvisningslenke.\"\n                    });\n                } catch (testError) {\n                    console.error(\"API: Even fallback test account failed:\", testError);\n                }\n            }\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Kunne ikke koble til e-posttjenesten. Vennligst kontakt oss direkte.\",\n                details: String(verifyError),\n                success: false\n            }, {\n                status: 500\n            });\n        }\n    } catch (error) {\n        console.error(\"API: General error in contact route:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Det oppstod en feil ved behandling av kontaktskjema\",\n            details: String(error),\n            success: false\n        }, {\n            status: 500\n        });\n    }\n}\n// Helper function to format the message text with all fields\nfunction formatMessageWithAllFields({ message, firstName, lastName, company, website, phone }) {\n    let formattedMessage = `Melding: ${message}`;\n    // Add extra information if available\n    if (firstName && lastName) {\n        formattedMessage += `\\n\\nFornavn: ${firstName}\\nEtternavn: ${lastName}`;\n    }\n    if (company) {\n        formattedMessage += `\\nSelskap: ${company}`;\n    }\n    if (website) {\n        formattedMessage += `\\nNettside: ${website}`;\n    }\n    if (phone) {\n        formattedMessage += `\\nTelefon: ${phone}`;\n    }\n    return formattedMessage;\n}\n// Helper function to send email\nasync function sendEmail(transporter, formData, fromEmail) {\n    const { name, email, message, firstName, lastName, company, website, phone } = formData;\n    try {\n        console.log(\"API: Preparing email to send\");\n        // Log the full mail configuration\n        const mailOptions = {\n            from: `Hepta <${fromEmail}>`,\n            to: fromEmail,\n            replyTo: email,\n            subject: `Kontaktskjema: ${name}`\n        };\n        console.log(\"API: Mail options:\", {\n            from: mailOptions.from,\n            to: mailOptions.to,\n            replyTo: mailOptions.replyTo,\n            subject: mailOptions.subject\n        });\n        // Format message with all details\n        const detailedMessage = formatMessageWithAllFields({\n            message,\n            firstName,\n            lastName,\n            company,\n            website,\n            phone\n        });\n        // Use the from email from environment variables\n        const fullMailOptions = {\n            ...mailOptions,\n            text: `\n        Navn: ${name}\n        E-post: ${email}\n        ${phone ? `Telefon: ${phone}` : \"\"}\n        ${company ? `Selskap: ${company}` : \"\"}\n        ${website ? `Nettside: ${website}` : \"\"}\n        \n        Melding: ${message}\n      `,\n            html: `\n        <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;\">\n          <h2>Ny henvendelse fra kontaktskjema</h2>\n          <p><strong>Navn:</strong> ${name}</p>\n          <p><strong>E-post:</strong> ${email}</p>\n          ${phone ? `<p><strong>Telefon:</strong> ${phone}</p>` : \"\"}\n          ${company ? `<p><strong>Selskap:</strong> ${company}</p>` : \"\"}\n          ${website ? `<p><strong>Nettside:</strong> ${website}</p>` : \"\"}\n          <p><strong>Melding:</strong></p>\n          <div style=\"background-color: #f5f5f5; padding: 15px; margin-top: 10px;\">\n            ${message.replace(/\\n/g, \"<br>\")}\n          </div>\n        </div>\n      `\n        };\n        console.log(\"API: Attempting to send email now\");\n        // Send email\n        const info = await transporter.sendMail(fullMailOptions);\n        console.log(\"API: Email sent successfully:\", info);\n        // Optional: Send auto-reply\n        try {\n            console.log(\"API: Sending auto-reply to\", email);\n            await transporter.sendMail({\n                from: `Hepta <${fromEmail}>`,\n                to: email,\n                subject: \"Takk for din henvendelse til Hepta\",\n                text: `\n          Hei ${firstName || name}\n          \n          Takk for din henvendelse til Hepta. Vi har mottatt meldingen din og vil ta kontakt så snart som mulig.\n          \n          Med vennlig hilsen,\n          Hepta AS\n        `,\n                html: `\n          <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;\">\n            <p>Hei ${firstName || name}!</p>\n            <p>Takk for din henvendelse til Hepta. Vi har mottatt meldingen din og vil ta kontakt så snart som mulig.</p>\n            <p>Med vennlig hilsen,<br>Hepta AS</p>\n          </div>\n        `,\n                headers: {\n                    \"X-Priority\": \"3\",\n                    \"Importance\": \"Normal\"\n                }\n            });\n            console.log(\"API: Auto-reply sent successfully\");\n        } catch (autoReplyError) {\n            // Don't fail if auto-reply fails\n            console.error(\"API: Auto-reply failed, but main email was sent:\", autoReplyError);\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            messageId: info.messageId,\n            message: \"Kontaktskjema mottatt og e-post sendt\"\n        });\n    } catch (emailError) {\n        console.error(\"API: Error sending email:\", emailError);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Kunne ikke sende e-post\",\n            details: String(emailError),\n            success: false\n        }, {\n            status: 500\n        });\n    }\n}\n// Also handle OPTIONS requests for CORS preflight\nasync function OPTIONS() {\n    return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(null, {\n        status: 200,\n        headers: {\n            \"Access-Control-Allow-Origin\": \"*\",\n            \"Access-Control-Allow-Methods\": \"POST, OPTIONS\",\n            \"Access-Control-Allow-Headers\": \"Content-Type\"\n        }\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2NvbnRhY3Qvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLGdEQUFnRDtBQUVRO0FBQ3BCO0FBRTdCLGVBQWVFLEtBQUtDLE9BQW9CO0lBQzdDQyxRQUFRQyxHQUFHLENBQUM7SUFFWixJQUFJO1FBQ0YscUJBQXFCO1FBQ3JCLElBQUlDO1FBQ0osSUFBSTtZQUNGQSxPQUFPLE1BQU1ILFFBQVFJLElBQUk7WUFDekJILFFBQVFDLEdBQUcsQ0FBQyw2QkFBNkJDO1FBQzNDLEVBQUUsT0FBT0UsWUFBWTtZQUNuQkosUUFBUUssS0FBSyxDQUFDLG9DQUFvQ0Q7WUFDbEQsT0FBT1IscURBQVlBLENBQUNPLElBQUksQ0FBQztnQkFDdkJFLE9BQU87Z0JBQ1BDLFNBQVM7WUFDWCxHQUFHO2dCQUFFQyxRQUFRO1lBQUk7UUFDbkI7UUFFQSx1QkFBdUI7UUFDdkIsSUFBSUwsS0FBS00sSUFBSSxLQUFLLE1BQU07WUFDdEJSLFFBQVFDLEdBQUcsQ0FBQztZQUNaLE9BQU9MLHFEQUFZQSxDQUFDTyxJQUFJLENBQUM7Z0JBQ3ZCRyxTQUFTO2dCQUNURSxNQUFNO2dCQUNOQyxTQUFTO1lBQ1g7UUFDRjtRQUVBLG9CQUFvQjtRQUNwQixNQUFNLEVBQ0pDLElBQUksRUFDSkMsS0FBSyxFQUNMRixPQUFPLEVBQ1BHLFNBQVMsRUFDVEMsUUFBUSxFQUNSQyxPQUFPLEVBQ1BDLE9BQU8sRUFDUEMsS0FBSyxFQUNOLEdBQUdkO1FBRUosa0ZBQWtGO1FBQ2xGLElBQUksQ0FBQ1EsUUFBUSxDQUFDQyxTQUFTLENBQUNGLFNBQVM7WUFDL0JULFFBQVFDLEdBQUcsQ0FBQztZQUNaLE9BQU9MLHFEQUFZQSxDQUFDTyxJQUFJLENBQUM7Z0JBQ3ZCRSxPQUFPO2dCQUNQQyxTQUFTO1lBQ1gsR0FBRztnQkFBRUMsUUFBUTtZQUFJO1FBQ25CO1FBRUEscUZBQXFGO1FBQ3JGUCxRQUFRQyxHQUFHLENBQUMsaURBQWlEO1lBQzNEZ0IsWUFBWUMsUUFBUUMsR0FBRyxDQUFDRixVQUFVO1lBQ2xDRyxZQUFZRixRQUFRQyxHQUFHLENBQUNDLFVBQVU7WUFDbENDLFlBQVlILFFBQVFDLEdBQUcsQ0FBQ0UsVUFBVTtZQUNsQ0MsWUFBWUosUUFBUUMsR0FBRyxDQUFDRyxVQUFVO1lBQ2xDQyxVQUFVTCxRQUFRQyxHQUFHLENBQUNJLFFBQVE7WUFDOUJDLGNBQWNOLFFBQVFDLEdBQUcsQ0FBQ0ssWUFBWTtZQUN0Q0MsWUFBWVAsUUFBUUMsR0FBRyxDQUFDTSxVQUFVLEdBQUcsZUFBZTtZQUNwREMsZ0JBQWdCUixRQUFRQyxHQUFHLENBQUNPLGNBQWMsR0FBRyxlQUFlO1lBQzVEQyxVQS9ETjtRQWdFSTtRQUVBLHFEQUFxRDtRQUNyRCxNQUFNQyxZQUFZVixRQUFRQyxHQUFHLENBQUNFLFVBQVUsSUFBSTtRQUM1Qyx3Q0FBd0M7UUFDeEMsTUFBTVEsZ0JBQWdCWCxRQUFRQyxHQUFHLENBQUNPLGNBQWMsSUFBSVIsUUFBUUMsR0FBRyxDQUFDTSxVQUFVO1FBQzFFLE1BQU1LLFlBQVlaLFFBQVFDLEdBQUcsQ0FBQ0YsVUFBVSxJQUFJO1FBQzVDLE1BQU1jLFlBQVlDLFNBQVNkLFFBQVFDLEdBQUcsQ0FBQ0MsVUFBVSxJQUFJLE9BQU87UUFDNUQsTUFBTWEsY0FBY2YsUUFBUUMsR0FBRyxDQUFDSyxZQUFZLEtBQUssVUFBVU8sY0FBYztRQUV6RSwyQ0FBMkM7UUFDM0MvQixRQUFRQyxHQUFHLENBQUMsOENBQThDO1lBQ3hEaUMsTUFBTUo7WUFDTkssTUFBTUo7WUFDTkssUUFBUUg7WUFDUkksTUFBTVQ7WUFDTlUsYUFBYSxDQUFDLENBQUNUO1FBQ2pCO1FBRUEsOEJBQThCO1FBQzlCLE1BQU1VLG9CQUFvQnJCLGtCQUF5QjtRQUNuRCxNQUFNc0Isb0JBQW9CRCxxQkFBcUIsQ0FBQ1Y7UUFDaEQ3QixRQUFRQyxHQUFHLENBQUMsQ0FBQyxtQkFBbUIsRUFBRXNDLG9CQUFvQixnQkFBZ0IsYUFBYSxDQUFDO1FBQ3BGdkMsUUFBUUMsR0FBRyxDQUFDLENBQUMsZ0NBQWdDLEVBQUV1QyxvQkFBb0IsUUFBUSxLQUFLLENBQUM7UUFFakYsNEJBQTRCO1FBQzVCeEMsUUFBUUMsR0FBRyxDQUFDO1FBRVosOENBQThDO1FBQzlDRCxRQUFRQyxHQUFHLENBQUMsMkJBQTJCO1lBQ3JDaUMsTUFBTUo7WUFDTkssTUFBTUo7WUFDTkssUUFBUUg7WUFDUlEsTUFBTTtnQkFDSkosTUFBTVQ7Z0JBQ05jLE1BQU1iLGdCQUFnQixhQUFhO1lBQ3JDO1FBQ0Y7UUFFQSxxQkFBcUI7UUFDckIsTUFBTWMsbUJBQW1CO1lBQ3ZCVCxNQUFNSjtZQUNOSyxNQUFNSjtZQUNOSyxRQUFRSDtZQUNSUSxNQUFNO2dCQUNKSixNQUFNVDtnQkFDTmMsTUFBTWI7WUFDUjtZQUNBLDZEQUE2RDtZQUM3RGUsT0FBTztZQUNQQyxRQUFRO1FBQ1Y7UUFFQSxNQUFNQyxjQUFjakQsdURBQTBCLENBQUM4QztRQUUvQyw4REFBOEQ7UUFDOUQsSUFBSUgsbUJBQW1CO1lBQ3JCeEMsUUFBUUMsR0FBRyxDQUFDO1lBQ1osSUFBSTtnQkFDRixNQUFNK0MsY0FBYyxNQUFNbkQseURBQTRCO2dCQUN0REcsUUFBUUMsR0FBRyxDQUFDLDhCQUE4QitDLFlBQVlYLElBQUk7Z0JBRTFELE1BQU1hLGtCQUFrQnJELHVEQUEwQixDQUFDO29CQUNqRHFDLE1BQU07b0JBQ05DLE1BQU07b0JBQ05DLFFBQVE7b0JBQ1JLLE1BQU07d0JBQ0pKLE1BQU1XLFlBQVlYLElBQUk7d0JBQ3RCSyxNQUFNTSxZQUFZTixJQUFJO29CQUN4QjtvQkFDQUUsT0FBTztnQkFDVDtnQkFFQSwyQ0FBMkM7Z0JBQzNDLE1BQU1PLG1CQUFtQkMsMkJBQTJCO29CQUNsRDNDO29CQUNBRztvQkFDQUM7b0JBQ0FDO29CQUNBQztvQkFDQUM7Z0JBQ0Y7Z0JBRUEsNkJBQTZCO2dCQUM3QixNQUFNcUMsY0FBYztvQkFDbEJDLE1BQU0sQ0FBQyxPQUFPLEVBQUUxQixVQUFVLENBQUMsQ0FBQztvQkFDNUIyQixJQUFJM0I7b0JBQ0o0QixTQUFTLENBQUMsZUFBZSxFQUFFOUMsS0FBSyxDQUFDO29CQUNqQytDLE1BQU0sQ0FBQyxNQUFNLEVBQUUvQyxLQUFLLFVBQVUsRUFBRUMsTUFBTSxXQUFXLEVBQUVLLFNBQVMsZUFBZSxFQUFFLEVBQUVtQyxpQkFBaUIsQ0FBQztnQkFDbkc7Z0JBRUFuRCxRQUFRQyxHQUFHLENBQUMseUNBQXlDO29CQUNuRHFELE1BQU1ELFlBQVlDLElBQUk7b0JBQ3RCQyxJQUFJRixZQUFZRSxFQUFFO29CQUNsQkMsU0FBU0gsWUFBWUcsT0FBTztnQkFDOUI7Z0JBRUEseUJBQXlCO2dCQUN6QixNQUFNRSxPQUFPLE1BQU1SLGdCQUFnQlMsUUFBUSxDQUFDO29CQUMxQyxHQUFHTixXQUFXO29CQUNkTyxNQUFNLENBQUM7O2tDQUVpQixFQUFFbEQsS0FBSztvQ0FDTCxFQUFFQyxNQUFNO2tCQUMxQixFQUFFSyxRQUFRLENBQUMsbUJBQW1CLEVBQUVBLE1BQU0sSUFBSSxDQUFDLEdBQUcsR0FBRztrQkFDakQsRUFBRUYsVUFBVSxDQUFDLG1CQUFtQixFQUFFQSxRQUFRLElBQUksQ0FBQyxHQUFHLEdBQUc7a0JBQ3JELEVBQUVDLFVBQVUsQ0FBQyxvQkFBb0IsRUFBRUEsUUFBUSxJQUFJLENBQUMsR0FBRyxHQUFHOzt1QkFFakQsRUFBRU4sUUFBUW9ELE9BQU8sQ0FBQyxPQUFPLFFBQVE7dUJBQ2pDLENBQUM7Z0JBQ2hCO2dCQUVBN0QsUUFBUUMsR0FBRyxDQUFDLHlCQUF5QnlELEtBQUtJLFNBQVM7Z0JBQ25EOUQsUUFBUUMsR0FBRyxDQUFDLHFCQUFxQkoseURBQTRCLENBQUM2RDtnQkFFOUQsT0FBTzlELHFEQUFZQSxDQUFDTyxJQUFJLENBQUM7b0JBQ3ZCRyxTQUFTO29CQUNUMEQsVUFBVTtvQkFDVkMsWUFBWXBFLHlEQUE0QixDQUFDNkQ7b0JBQ3pDakQsU0FBUztnQkFDWDtZQUNGLEVBQUUsT0FBT3lELFdBQVc7Z0JBQ2xCbEUsUUFBUUssS0FBSyxDQUFDLDZCQUE2QjZEO2dCQUMzQyxPQUFPdEUscURBQVlBLENBQUNPLElBQUksQ0FBQztvQkFDdkJFLE9BQU87b0JBQ1A4RCxTQUFTQyxPQUFPRjtvQkFDaEI1RCxTQUFTO2dCQUNYLEdBQUc7b0JBQUVDLFFBQVE7Z0JBQUk7WUFDbkI7UUFDRjtRQUVBLDRDQUE0QztRQUM1QyxJQUFJO1lBQ0ZQLFFBQVFDLEdBQUcsQ0FBQztZQUNaLElBQUk7Z0JBQ0YsTUFBTTZDLFlBQVl1QixNQUFNO2dCQUN4QnJFLFFBQVFDLEdBQUcsQ0FBQztZQUNkLEVBQUUsT0FBT3FFLGFBQWE7Z0JBQ3BCdEUsUUFBUUssS0FBSyxDQUFDLDZDQUE2Q2lFO2dCQUMzRCxNQUFNQTtZQUNSO1lBRUEsd0JBQXdCO1lBQ3hCdEUsUUFBUUMsR0FBRyxDQUFDO1lBQ1osT0FBTyxNQUFNc0UsVUFDVHpCLGFBQ0E7Z0JBQ0VwQztnQkFDQUM7Z0JBQ0FGO2dCQUNBRztnQkFDQUM7Z0JBQ0FDO2dCQUNBQztnQkFDQUM7WUFDRixHQUNBWTtRQUVOLEVBQUUsT0FBTzBDLGFBQWE7WUFDcEJ0RSxRQUFRSyxLQUFLLENBQUMsNkNBQTZDaUU7WUFFM0QsbUVBQW1FO1lBQ25FdEUsUUFBUUMsR0FBRyxDQUFDO1lBQ1osSUFBSTtnQkFDRixPQUFPLE1BQU1zRSxVQUNUekIsYUFDQTtvQkFDRXBDO29CQUNBQztvQkFDQUY7b0JBQ0FHO29CQUNBQztvQkFDQUM7b0JBQ0FDO29CQUNBQztnQkFDRixHQUNBWTtZQUVOLEVBQUUsT0FBTzRDLFdBQVc7Z0JBQ2xCeEUsUUFBUUssS0FBSyxDQUFDLDBDQUEwQ21FO2dCQUV4RCw4REFBOEQ7Z0JBQzlELElBQUkxQyxVQUFVMkMsUUFBUSxDQUFDLGFBQWE7b0JBQ2xDekUsUUFBUUMsR0FBRyxDQUFDO29CQUNaLElBQUk7d0JBQ0YsTUFBTXlFLG9CQUFvQjdFLHVEQUEwQixDQUFDOzRCQUNuRHFDLE1BQU1KOzRCQUNOSyxNQUFNSjs0QkFDTkssUUFBUUg7NEJBQ1IsK0NBQStDOzRCQUMvQ1csT0FBTzt3QkFDVDt3QkFFQSxPQUFPLE1BQU0yQixVQUNURyxtQkFDQTs0QkFDRWhFOzRCQUNBQzs0QkFDQUY7NEJBQ0FHOzRCQUNBQzs0QkFDQUM7NEJBQ0FDOzRCQUNBQzt3QkFDRixHQUNBWTtvQkFFTixFQUFFLE9BQU8rQyxhQUFhO3dCQUNwQjNFLFFBQVFLLEtBQUssQ0FBQyxzQ0FBc0NzRTtvQkFDdEQ7Z0JBQ0Y7WUFDRjtZQUVBLDRFQUE0RTtZQUM1RSxJQUFJcEMsbUJBQW1CO2dCQUNyQnZDLFFBQVFDLEdBQUcsQ0FBQztnQkFDWixJQUFJO29CQUNGLE1BQU0rQyxjQUFjLE1BQU1uRCx5REFBNEI7b0JBRXRELE1BQU1xRCxrQkFBa0JyRCx1REFBMEIsQ0FBQzt3QkFDakRxQyxNQUFNO3dCQUNOQyxNQUFNO3dCQUNOQyxRQUFRO3dCQUNSSyxNQUFNOzRCQUNKSixNQUFNVyxZQUFZWCxJQUFJOzRCQUN0QkssTUFBTU0sWUFBWU4sSUFBSTt3QkFDeEI7b0JBQ0Y7b0JBRUEsMkNBQTJDO29CQUMzQyxNQUFNUyxtQkFBbUJDLDJCQUEyQjt3QkFDbEQzQzt3QkFDQUc7d0JBQ0FDO3dCQUNBQzt3QkFDQUM7d0JBQ0FDO29CQUNGO29CQUVBLHlCQUF5QjtvQkFDekIsTUFBTTBDLE9BQU8sTUFBTVIsZ0JBQWdCUyxRQUFRLENBQUM7d0JBQzFDTCxNQUFNLENBQUMsT0FBTyxFQUFFMUIsVUFBVSxDQUFDLENBQUM7d0JBQzVCMkIsSUFBSTNCO3dCQUNKNEIsU0FBUyxDQUFDLGVBQWUsRUFBRTlDLEtBQUssQ0FBQzt3QkFDakMrQyxNQUFNLENBQUMsTUFBTSxFQUFFL0MsS0FBSyxVQUFVLEVBQUVDLE1BQU0sV0FBVyxFQUFFSyxTQUFTLGVBQWUsRUFBRSxFQUFFbUMsaUJBQWlCLENBQUM7d0JBQ2pHUyxNQUFNLENBQUM7O29DQUVpQixFQUFFbEQsS0FBSztzQ0FDTCxFQUFFQyxNQUFNO29CQUMxQixFQUFFSyxRQUFRLENBQUMsbUJBQW1CLEVBQUVBLE1BQU0sSUFBSSxDQUFDLEdBQUcsR0FBRztvQkFDakQsRUFBRUYsVUFBVSxDQUFDLG1CQUFtQixFQUFFQSxRQUFRLElBQUksQ0FBQyxHQUFHLEdBQUc7b0JBQ3JELEVBQUVDLFVBQVUsQ0FBQyxvQkFBb0IsRUFBRUEsUUFBUSxJQUFJLENBQUMsR0FBRyxHQUFHOzt5QkFFakQsRUFBRU4sUUFBUW9ELE9BQU8sQ0FBQyxPQUFPLFFBQVE7eUJBQ2pDLENBQUM7b0JBQ2hCO29CQUVBN0QsUUFBUUMsR0FBRyxDQUFDLHlCQUF5QnlELEtBQUtJLFNBQVM7b0JBQ25EOUQsUUFBUUMsR0FBRyxDQUFDLHFCQUFxQkoseURBQTRCLENBQUM2RDtvQkFFOUQsT0FBTzlELHFEQUFZQSxDQUFDTyxJQUFJLENBQUM7d0JBQ3ZCRyxTQUFTO3dCQUNUMEQsVUFBVTt3QkFDVkMsWUFBWXBFLHlEQUE0QixDQUFDNkQ7d0JBQ3pDakQsU0FBUztvQkFDWDtnQkFDRixFQUFFLE9BQU95RCxXQUFXO29CQUNsQmxFLFFBQVFLLEtBQUssQ0FBQywyQ0FBMkM2RDtnQkFDM0Q7WUFDRjtZQUVBLE9BQU90RSxxREFBWUEsQ0FBQ08sSUFBSSxDQUFDO2dCQUN2QkUsT0FBTztnQkFDUDhELFNBQVNDLE9BQU9FO2dCQUNoQmhFLFNBQVM7WUFDWCxHQUFHO2dCQUFFQyxRQUFRO1lBQUk7UUFDbkI7SUFFRixFQUFFLE9BQU9GLE9BQU87UUFDZEwsUUFBUUssS0FBSyxDQUFDLHdDQUF3Q0E7UUFDdEQsT0FBT1QscURBQVlBLENBQUNPLElBQUksQ0FBQztZQUN2QkUsT0FBTztZQUNQOEQsU0FBU0MsT0FBTy9EO1lBQ2hCQyxTQUFTO1FBQ1gsR0FBRztZQUFFQyxRQUFRO1FBQUk7SUFDbkI7QUFDRjtBQUVBLDZEQUE2RDtBQUM3RCxTQUFTNkMsMkJBQTJCLEVBQUUzQyxPQUFPLEVBQUVHLFNBQVMsRUFBRUMsUUFBUSxFQUFFQyxPQUFPLEVBQUVDLE9BQU8sRUFBRUMsS0FBSyxFQUFFO0lBQzNGLElBQUltQyxtQkFBbUIsQ0FBQyxTQUFTLEVBQUUxQyxRQUFRLENBQUM7SUFFNUMscUNBQXFDO0lBQ3JDLElBQUlHLGFBQWFDLFVBQVU7UUFDekJzQyxvQkFBb0IsQ0FBQyxhQUFhLEVBQUV2QyxVQUFVLGFBQWEsRUFBRUMsU0FBUyxDQUFDO0lBQ3pFO0lBRUEsSUFBSUMsU0FBUztRQUNYcUMsb0JBQW9CLENBQUMsV0FBVyxFQUFFckMsUUFBUSxDQUFDO0lBQzdDO0lBRUEsSUFBSUMsU0FBUztRQUNYb0Msb0JBQW9CLENBQUMsWUFBWSxFQUFFcEMsUUFBUSxDQUFDO0lBQzlDO0lBRUEsSUFBSUMsT0FBTztRQUNUbUMsb0JBQW9CLENBQUMsV0FBVyxFQUFFbkMsTUFBTSxDQUFDO0lBQzNDO0lBRUEsT0FBT21DO0FBQ1Q7QUFFQSxnQ0FBZ0M7QUFDaEMsZUFBZW9CLFVBQVV6QixXQUFXLEVBQUU4QixRQUFRLEVBQUVDLFNBQVM7SUFDdkQsTUFBTSxFQUNKbkUsSUFBSSxFQUNKQyxLQUFLLEVBQ0xGLE9BQU8sRUFDUEcsU0FBUyxFQUNUQyxRQUFRLEVBQ1JDLE9BQU8sRUFDUEMsT0FBTyxFQUNQQyxLQUFLLEVBQ04sR0FBRzREO0lBRUosSUFBSTtRQUNGNUUsUUFBUUMsR0FBRyxDQUFDO1FBRVosa0NBQWtDO1FBQ2xDLE1BQU1vRCxjQUFjO1lBQ2xCQyxNQUFNLENBQUMsT0FBTyxFQUFFdUIsVUFBVSxDQUFDLENBQUM7WUFDNUJ0QixJQUFJc0I7WUFDSkMsU0FBU25FO1lBQ1Q2QyxTQUFTLENBQUMsZUFBZSxFQUFFOUMsS0FBSyxDQUFDO1FBQ25DO1FBRUFWLFFBQVFDLEdBQUcsQ0FBQyxzQkFBc0I7WUFDaENxRCxNQUFNRCxZQUFZQyxJQUFJO1lBQ3RCQyxJQUFJRixZQUFZRSxFQUFFO1lBQ2xCdUIsU0FBU3pCLFlBQVl5QixPQUFPO1lBQzVCdEIsU0FBU0gsWUFBWUcsT0FBTztRQUM5QjtRQUVBLGtDQUFrQztRQUNsQyxNQUFNdUIsa0JBQWtCM0IsMkJBQTJCO1lBQ2pEM0M7WUFDQUc7WUFDQUM7WUFDQUM7WUFDQUM7WUFDQUM7UUFDRjtRQUVBLGdEQUFnRDtRQUNoRCxNQUFNZ0Usa0JBQWtCO1lBQ3RCLEdBQUczQixXQUFXO1lBQ2RJLE1BQU0sQ0FBQztjQUNDLEVBQUUvQyxLQUFLO2dCQUNMLEVBQUVDLE1BQU07UUFDaEIsRUFBRUssUUFBUSxDQUFDLFNBQVMsRUFBRUEsTUFBTSxDQUFDLEdBQUcsR0FBRztRQUNuQyxFQUFFRixVQUFVLENBQUMsU0FBUyxFQUFFQSxRQUFRLENBQUMsR0FBRyxHQUFHO1FBQ3ZDLEVBQUVDLFVBQVUsQ0FBQyxVQUFVLEVBQUVBLFFBQVEsQ0FBQyxHQUFHLEdBQUc7O2lCQUUvQixFQUFFTixRQUFRO01BQ3JCLENBQUM7WUFDRG1ELE1BQU0sQ0FBQzs7O29DQUd1QixFQUFFbEQsS0FBSztzQ0FDTCxFQUFFQyxNQUFNO1VBQ3BDLEVBQUVLLFFBQVEsQ0FBQyw2QkFBNkIsRUFBRUEsTUFBTSxJQUFJLENBQUMsR0FBRyxHQUFHO1VBQzNELEVBQUVGLFVBQVUsQ0FBQyw2QkFBNkIsRUFBRUEsUUFBUSxJQUFJLENBQUMsR0FBRyxHQUFHO1VBQy9ELEVBQUVDLFVBQVUsQ0FBQyw4QkFBOEIsRUFBRUEsUUFBUSxJQUFJLENBQUMsR0FBRyxHQUFHOzs7WUFHOUQsRUFBRU4sUUFBUW9ELE9BQU8sQ0FBQyxPQUFPLFFBQVE7OztNQUd2QyxDQUFDO1FBQ0g7UUFFQTdELFFBQVFDLEdBQUcsQ0FBQztRQUVaLGFBQWE7UUFDYixNQUFNeUQsT0FBTyxNQUFNWixZQUFZYSxRQUFRLENBQUNxQjtRQUN4Q2hGLFFBQVFDLEdBQUcsQ0FBQyxpQ0FBaUN5RDtRQUU3Qyw0QkFBNEI7UUFDNUIsSUFBSTtZQUNGMUQsUUFBUUMsR0FBRyxDQUFDLDhCQUE4QlU7WUFFMUMsTUFBTW1DLFlBQVlhLFFBQVEsQ0FBQztnQkFDekJMLE1BQU0sQ0FBQyxPQUFPLEVBQUV1QixVQUFVLENBQUMsQ0FBQztnQkFDNUJ0QixJQUFJNUM7Z0JBQ0o2QyxTQUFTO2dCQUNUQyxNQUFNLENBQUM7Y0FDRCxFQUFFN0MsYUFBYUYsS0FBSzs7Ozs7O1FBTTFCLENBQUM7Z0JBQ0RrRCxNQUFNLENBQUM7O21CQUVJLEVBQUVoRCxhQUFhRixLQUFLOzs7O1FBSS9CLENBQUM7Z0JBQUN1RSxTQUFTO29CQUNULGNBQWM7b0JBQ2QsY0FBYztnQkFDaEI7WUFDRjtZQUVBakYsUUFBUUMsR0FBRyxDQUFDO1FBQ2QsRUFBRSxPQUFPaUYsZ0JBQWdCO1lBQ3ZCLGlDQUFpQztZQUNqQ2xGLFFBQVFLLEtBQUssQ0FBQyxvREFBb0Q2RTtRQUNwRTtRQUVBLE9BQU90RixxREFBWUEsQ0FBQ08sSUFBSSxDQUFDO1lBQ3ZCRyxTQUFTO1lBQ1R3RCxXQUFXSixLQUFLSSxTQUFTO1lBQ3pCckQsU0FBUztRQUNYO0lBQ0YsRUFBRSxPQUFPMEUsWUFBWTtRQUNuQm5GLFFBQVFLLEtBQUssQ0FBQyw2QkFBNkI4RTtRQUMzQyxPQUFPdkYscURBQVlBLENBQUNPLElBQUksQ0FBQztZQUN2QkUsT0FBTztZQUNQOEQsU0FBU0MsT0FBT2U7WUFDaEI3RSxTQUFTO1FBQ1gsR0FBRztZQUFFQyxRQUFRO1FBQUk7SUFDbkI7QUFDRjtBQUVBLGtEQUFrRDtBQUMzQyxlQUFlNkU7SUFDcEIsT0FBTyxJQUFJeEYscURBQVlBLENBQUMsTUFBTTtRQUM1QlcsUUFBUTtRQUNSMEUsU0FBUztZQUNQLCtCQUErQjtZQUMvQixnQ0FBZ0M7WUFDaEMsZ0NBQWdDO1FBQ2xDO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2hlcHRhLWRhc2hib2FyZC8uL2FwcC9hcGkvY29udGFjdC9yb3V0ZS50cz9jZmZlIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEVuaGFuY2VkIGxvZ2dpbmcgZm9yIGFwcC9hcGkvY29udGFjdC9yb3V0ZS50c1xuXG5pbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IG5vZGVtYWlsZXIgZnJvbSAnbm9kZW1haWxlcic7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIGNvbnNvbGUubG9nKCdBUEk6IENvbnRhY3QgZW5kcG9pbnQgaGl0Jyk7XG5cbiAgdHJ5IHtcbiAgICAvLyBQYXJzZSByZXF1ZXN0IGJvZHlcbiAgICBsZXQgYm9keTtcbiAgICB0cnkge1xuICAgICAgYm9keSA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xuICAgICAgY29uc29sZS5sb2coJ0FQSTogUmVxdWVzdCBib2R5IHBhcnNlZDonLCBib2R5KTtcbiAgICB9IGNhdGNoIChwYXJzZUVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdBUEk6IEVycm9yIHBhcnNpbmcgcmVxdWVzdCBKU09OOicsIHBhcnNlRXJyb3IpO1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgZXJyb3I6ICdVZ3lsZGlnIGZvcmVzcMO4cnNlbHNmb3JtYXQnLFxuICAgICAgICBzdWNjZXNzOiBmYWxzZVxuICAgICAgfSwgeyBzdGF0dXM6IDQwMCB9KTtcbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgdGVzdCByZXF1ZXN0c1xuICAgIGlmIChib2R5LnRlc3QgPT09IHRydWUpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdBUEk6IFRlc3QgcmVxdWVzdCBkZXRlY3RlZCcpO1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgdGVzdDogdHJ1ZSxcbiAgICAgICAgbWVzc2FnZTogJ0FQSSBlbmRwb2ludCBpcyB3b3JraW5nJ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gR2V0IGFsbCBmb3JtIGRhdGFcbiAgICBjb25zdCB7XG4gICAgICBuYW1lLFxuICAgICAgZW1haWwsXG4gICAgICBtZXNzYWdlLFxuICAgICAgZmlyc3ROYW1lLFxuICAgICAgbGFzdE5hbWUsXG4gICAgICBjb21wYW55LFxuICAgICAgd2Vic2l0ZSxcbiAgICAgIHBob25lXG4gICAgfSA9IGJvZHk7XG5cbiAgICAvLyBWYWxpZGF0ZSByZXF1aXJlZCBmaWVsZHMgLSBrZWVwIGNvbXBhdGliaWxpdHkgd2l0aCB0aGUgb3JpZ2luYWwgcmVxdWlyZWQgZmllbGRzXG4gICAgaWYgKCFuYW1lIHx8ICFlbWFpbCB8fCAhbWVzc2FnZSkge1xuICAgICAgY29uc29sZS5sb2coJ0FQSTogTWlzc2luZyByZXF1aXJlZCBmaWVsZHMnKTtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgIGVycm9yOiAnQWxsZSBmZWx0ZW5lIG3DpSBmeWxsZXMgdXQnLFxuICAgICAgICBzdWNjZXNzOiBmYWxzZVxuICAgICAgfSwgeyBzdGF0dXM6IDQwMCB9KTtcbiAgICB9XG5cbiAgICAvLyBFTkhBTkNFRCBMT0dHSU5HOiBMb2cgYWxsIGVudmlyb25tZW50IHZhcmlhYmxlcyByZWxhdGVkIHRvIGVtYWlsIChleGNlcHQgcGFzc3dvcmQpXG4gICAgY29uc29sZS5sb2coJ0FQSTogQWxsIGVtYWlsLXJlbGF0ZWQgZW52aXJvbm1lbnQgdmFyaWFibGVzOicsIHtcbiAgICAgIEVNQUlMX0hPU1Q6IHByb2Nlc3MuZW52LkVNQUlMX0hPU1QsXG4gICAgICBFTUFJTF9QT1JUOiBwcm9jZXNzLmVudi5FTUFJTF9QT1JULFxuICAgICAgRU1BSUxfVVNFUjogcHJvY2Vzcy5lbnYuRU1BSUxfVVNFUixcbiAgICAgIEVNQUlMX0ZST006IHByb2Nlc3MuZW52LkVNQUlMX0ZST00sXG4gICAgICBFTUFJTF9UTzogcHJvY2Vzcy5lbnYuRU1BSUxfVE8sXG4gICAgICBFTUFJTF9TRUNVUkU6IHByb2Nlc3MuZW52LkVNQUlMX1NFQ1VSRSxcbiAgICAgIEVNQUlMX1BBU1M6IHByb2Nlc3MuZW52LkVNQUlMX1BBU1MgPyAnW1BST1ZJREVEXScgOiAnW05PVCBQUk9WSURFRF0nLFxuICAgICAgRU1BSUxfUEFTU1dPUkQ6IHByb2Nlc3MuZW52LkVNQUlMX1BBU1NXT1JEID8gJ1tQUk9WSURFRF0nIDogJ1tOT1QgUFJPVklERURdJyxcbiAgICAgIE5PREVfRU5WOiBwcm9jZXNzLmVudi5OT0RFX0VOVlxuICAgIH0pO1xuXG4gICAgLy8gR2V0IGVtYWlsIGNvbmZpZ3VyYXRpb24gZnJvbSBlbnZpcm9ubWVudCB2YXJpYWJsZXNcbiAgICBjb25zdCBlbWFpbFVzZXIgPSBwcm9jZXNzLmVudi5FTUFJTF9VU0VSIHx8ICdoZXlAaGVwdGEuYml6JztcbiAgICAvLyBFTkhBTkNFRDogVHJ5IGJvdGggcGFzc3dvcmQgdmFyaWFibGVzXG4gICAgY29uc3QgZW1haWxQYXNzd29yZCA9IHByb2Nlc3MuZW52LkVNQUlMX1BBU1NXT1JEIHx8IHByb2Nlc3MuZW52LkVNQUlMX1BBU1M7XG4gICAgY29uc3QgZW1haWxIb3N0ID0gcHJvY2Vzcy5lbnYuRU1BSUxfSE9TVCB8fCAnc210cC1yZWxheTIud2ViaHVzZXQubm8nO1xuICAgIGNvbnN0IGVtYWlsUG9ydCA9IHBhcnNlSW50KHByb2Nlc3MuZW52LkVNQUlMX1BPUlQgfHwgJzU4NycsIDEwKTtcbiAgICBjb25zdCBlbWFpbFNlY3VyZSA9IHByb2Nlc3MuZW52LkVNQUlMX1NFQ1VSRSA9PT0gJ3RydWUnIHx8IGVtYWlsUG9ydCA9PT0gNDY1O1xuXG4gICAgLy8gTG9nIGNvbmZpZ3VyYXRpb24gKHdpdGhvdXQgdGhlIHBhc3N3b3JkKVxuICAgIGNvbnNvbGUubG9nKCdBUEk6IEVtYWlsIGNvbmZpZ3VyYXRpb24gYWZ0ZXIgcHJvY2Vzc2luZzonLCB7XG4gICAgICBob3N0OiBlbWFpbEhvc3QsXG4gICAgICBwb3J0OiBlbWFpbFBvcnQsXG4gICAgICBzZWN1cmU6IGVtYWlsU2VjdXJlLFxuICAgICAgdXNlcjogZW1haWxVc2VyLFxuICAgICAgaGFzUGFzc3dvcmQ6ICEhZW1haWxQYXNzd29yZFxuICAgIH0pO1xuXG4gICAgLy8gRU5IQU5DRUQ6IExvZyBtb2RlIGRlY2lzaW9uXG4gICAgY29uc3QgaXNEZXZlbG9wbWVudE1vZGUgPSBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JztcbiAgICBjb25zdCBzaG91bGRVc2VFdGhlcmVhbCA9IGlzRGV2ZWxvcG1lbnRNb2RlICYmICFlbWFpbFBhc3N3b3JkO1xuICAgIGNvbnNvbGUubG9nKGBBUEk6IEN1cnJlbnQgbW9kZTogJHtpc0RldmVsb3BtZW50TW9kZSA/ICdERVZFTE9QTUVOVCcgOiAnUFJPRFVDVElPTid9YCk7XG4gICAgY29uc29sZS5sb2coYEFQSTogV2lsbCB1c2UgRXRoZXJlYWwgdGVzdGluZzogJHtzaG91bGRVc2VFdGhlcmVhbCA/ICdZRVMnIDogJ05PJ31gKTtcblxuICAgIC8vIFNldCB1cCB0aGUgU01UUCB0cmFuc3BvcnRcbiAgICBjb25zb2xlLmxvZygnQVBJOiBDcmVhdGluZyBub2RlbWFpbGVyIHRyYW5zcG9ydGVyJyk7XG5cbiAgICAvLyBGb3IgV2ViaHVzZXQsIHdlIG5lZWQgcHJvcGVyIGF1dGhlbnRpY2F0aW9uXG4gICAgY29uc29sZS5sb2coJ0FQSTogVHJhbnNwb3J0IG9wdGlvbnM6Jywge1xuICAgICAgaG9zdDogZW1haWxIb3N0LFxuICAgICAgcG9ydDogZW1haWxQb3J0LFxuICAgICAgc2VjdXJlOiBlbWFpbFNlY3VyZSxcbiAgICAgIGF1dGg6IHtcbiAgICAgICAgdXNlcjogZW1haWxVc2VyLFxuICAgICAgICBwYXNzOiBlbWFpbFBhc3N3b3JkID8gJ1tISURERU5dJyA6ICdbTUlTU0lOR10nXG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBDcmVhdGUgdHJhbnNwb3J0ZXJcbiAgICBjb25zdCB0cmFuc3BvcnRPcHRpb25zID0ge1xuICAgICAgaG9zdDogZW1haWxIb3N0LFxuICAgICAgcG9ydDogZW1haWxQb3J0LFxuICAgICAgc2VjdXJlOiBlbWFpbFNlY3VyZSxcbiAgICAgIGF1dGg6IHtcbiAgICAgICAgdXNlcjogZW1haWxVc2VyLFxuICAgICAgICBwYXNzOiBlbWFpbFBhc3N3b3JkXG4gICAgICB9LFxuICAgICAgLy8gRU5IQU5DRUQ6IEFkZCBkZWJ1ZyBtb2RlIHRvIHNlZSBkZXRhaWxlZCBTTVRQIGNvbnZlcnNhdGlvblxuICAgICAgZGVidWc6IHRydWUsXG4gICAgICBsb2dnZXI6IHRydWVcbiAgICB9O1xuXG4gICAgY29uc3QgdHJhbnNwb3J0ZXIgPSBub2RlbWFpbGVyLmNyZWF0ZVRyYW5zcG9ydCh0cmFuc3BvcnRPcHRpb25zKTtcblxuICAgIC8vIFVzZSBFdGhlcmVhbCBpbiBkZXZlbG9wbWVudCBtb2RlIGlmIG5vIHBhc3N3b3JkIGlzIHByb3ZpZGVkXG4gICAgaWYgKHNob3VsZFVzZUV0aGVyZWFsKSB7XG4gICAgICBjb25zb2xlLmxvZygnQVBJOiBJbiBkZXZlbG9wbWVudCBtb2RlIHdpdGhvdXQgcGFzc3dvcmQsIHVzaW5nIEV0aGVyZWFsIHRlc3QgYWNjb3VudCcpO1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdGVzdEFjY291bnQgPSBhd2FpdCBub2RlbWFpbGVyLmNyZWF0ZVRlc3RBY2NvdW50KCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdBUEk6IENyZWF0ZWQgdGVzdCBhY2NvdW50OicsIHRlc3RBY2NvdW50LnVzZXIpO1xuXG4gICAgICAgIGNvbnN0IHRlc3RUcmFuc3BvcnRlciA9IG5vZGVtYWlsZXIuY3JlYXRlVHJhbnNwb3J0KHtcbiAgICAgICAgICBob3N0OiAnc210cC5ldGhlcmVhbC5lbWFpbCcsXG4gICAgICAgICAgcG9ydDogNTg3LFxuICAgICAgICAgIHNlY3VyZTogZmFsc2UsXG4gICAgICAgICAgYXV0aDoge1xuICAgICAgICAgICAgdXNlcjogdGVzdEFjY291bnQudXNlcixcbiAgICAgICAgICAgIHBhc3M6IHRlc3RBY2NvdW50LnBhc3MsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBkZWJ1ZzogdHJ1ZVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBGb3JtYXQgbWVzc2FnZSB3aXRoIGFsbCBhdmFpbGFibGUgZmllbGRzXG4gICAgICAgIGNvbnN0IGZvcm1hdHRlZE1lc3NhZ2UgPSBmb3JtYXRNZXNzYWdlV2l0aEFsbEZpZWxkcyh7XG4gICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICBmaXJzdE5hbWUsXG4gICAgICAgICAgbGFzdE5hbWUsXG4gICAgICAgICAgY29tcGFueSxcbiAgICAgICAgICB3ZWJzaXRlLFxuICAgICAgICAgIHBob25lXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEVOSEFOQ0VEOiBMb2cgbWFpbCBvcHRpb25zXG4gICAgICAgIGNvbnN0IG1haWxPcHRpb25zID0ge1xuICAgICAgICAgIGZyb206IGBIZXB0YSA8JHtlbWFpbFVzZXJ9PmAsXG4gICAgICAgICAgdG86IGVtYWlsVXNlcixcbiAgICAgICAgICBzdWJqZWN0OiBgS29udGFrdHNramVtYTogJHtuYW1lfWAsXG4gICAgICAgICAgdGV4dDogYE5hdm46ICR7bmFtZX1cXG5FLXBvc3Q6ICR7ZW1haWx9XFxuVGVsZWZvbjogJHtwaG9uZSB8fCAnSWtrZSBvcHBnaXR0J31cXG4ke2Zvcm1hdHRlZE1lc3NhZ2V9YFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnNvbGUubG9nKCdBUEk6IFNlbmRpbmcgdGVzdCBlbWFpbCB3aXRoIG9wdGlvbnM6Jywge1xuICAgICAgICAgIGZyb206IG1haWxPcHRpb25zLmZyb20sXG4gICAgICAgICAgdG86IG1haWxPcHRpb25zLnRvLFxuICAgICAgICAgIHN1YmplY3Q6IG1haWxPcHRpb25zLnN1YmplY3RcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gU2VuZCB3aXRoIHRlc3QgYWNjb3VudFxuICAgICAgICBjb25zdCBpbmZvID0gYXdhaXQgdGVzdFRyYW5zcG9ydGVyLnNlbmRNYWlsKHtcbiAgICAgICAgICAuLi5tYWlsT3B0aW9ucyxcbiAgICAgICAgICBodG1sOiBgPGRpdj5cbiAgICAgICAgICAgICAgICAgIDxoMj5OeSBoZW52ZW5kZWxzZTwvaDI+XG4gICAgICAgICAgICAgICAgICA8cD48Yj5OYXZuOjwvYj4gJHtuYW1lfTwvcD5cbiAgICAgICAgICAgICAgICAgIDxwPjxiPkUtcG9zdDo8L2I+ICR7ZW1haWx9PC9wPlxuICAgICAgICAgICAgICAgICAgJHtwaG9uZSA/IGA8cD48Yj5UZWxlZm9uOjwvYj4gJHtwaG9uZX08L3A+YCA6ICcnfVxuICAgICAgICAgICAgICAgICAgJHtjb21wYW55ID8gYDxwPjxiPlNlbHNrYXA6PC9iPiAke2NvbXBhbnl9PC9wPmAgOiAnJ31cbiAgICAgICAgICAgICAgICAgICR7d2Vic2l0ZSA/IGA8cD48Yj5OZXR0c2lkZTo8L2I+ICR7d2Vic2l0ZX08L3A+YCA6ICcnfVxuICAgICAgICAgICAgICAgICAgPHA+PGI+TWVsZGluZzo8L2I+PC9wPlxuICAgICAgICAgICAgICAgICAgPGRpdj4ke21lc3NhZ2UucmVwbGFjZSgvXFxuL2csICc8YnI+Jyl9PC9kaXY+XG4gICAgICAgICAgICAgICAgIDwvZGl2PmAsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKCdBUEk6IFRlc3QgZW1haWwgc2VudDonLCBpbmZvLm1lc3NhZ2VJZCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdBUEk6IFByZXZpZXcgVVJMOicsIG5vZGVtYWlsZXIuZ2V0VGVzdE1lc3NhZ2VVcmwoaW5mbykpO1xuXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICB0ZXN0TW9kZTogdHJ1ZSxcbiAgICAgICAgICBwcmV2aWV3VXJsOiBub2RlbWFpbGVyLmdldFRlc3RNZXNzYWdlVXJsKGluZm8pLFxuICAgICAgICAgIG1lc3NhZ2U6ICdFLXBvc3Qgc2VuZHQgaSB0ZXN0bW9kdXMuIFNqZWtrIHNlcnZlcmVuIGZvciBmb3Jow6VuZHN2aXNuaW5nc2xlbmtlLidcbiAgICAgICAgfSk7XG4gICAgICB9IGNhdGNoICh0ZXN0RXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignQVBJOiBUZXN0IGFjY291bnQgZmFpbGVkOicsIHRlc3RFcnJvcik7XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgICAgZXJyb3I6ICdLdW5uZSBpa2tlIG9wcHJldHRlIHRlc3Rrb250byBmb3IgZS1wb3N0JyxcbiAgICAgICAgICBkZXRhaWxzOiBTdHJpbmcodGVzdEVycm9yKSxcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZVxuICAgICAgICB9LCB7IHN0YXR1czogNTAwIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFRyeSB0byBzZW5kIHRoZSBlbWFpbCB2aWEgY29uZmlndXJlZCBTTVRQXG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKCdBUEk6IEF0dGVtcHRpbmcgdG8gdmVyaWZ5IFNNVFAgY29ubmVjdGlvbicpO1xuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgdHJhbnNwb3J0ZXIudmVyaWZ5KCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdBUEk6IFNNVFAgY29ubmVjdGlvbiB2ZXJpZmllZCBzdWNjZXNzZnVsbHknKTtcbiAgICAgIH0gY2F0Y2ggKHZlcmlmeUVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0FQSTogU01UUCB2ZXJpZmljYXRpb24gZmFpbGVkIHdpdGggZXJyb3I6JywgdmVyaWZ5RXJyb3IpO1xuICAgICAgICB0aHJvdyB2ZXJpZnlFcnJvcjtcbiAgICAgIH1cblxuICAgICAgLy8gU2VuZCB0aGUgYWN0dWFsIGVtYWlsXG4gICAgICBjb25zb2xlLmxvZygnQVBJOiBQcm9jZWVkaW5nIHRvIHNlbmQgZW1haWwgd2l0aCB2ZXJpZmllZCBjb25uZWN0aW9uJyk7XG4gICAgICByZXR1cm4gYXdhaXQgc2VuZEVtYWlsKFxuICAgICAgICAgIHRyYW5zcG9ydGVyLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICBlbWFpbCxcbiAgICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgICBmaXJzdE5hbWUsXG4gICAgICAgICAgICBsYXN0TmFtZSxcbiAgICAgICAgICAgIGNvbXBhbnksXG4gICAgICAgICAgICB3ZWJzaXRlLFxuICAgICAgICAgICAgcGhvbmVcbiAgICAgICAgICB9LFxuICAgICAgICAgIGVtYWlsVXNlclxuICAgICAgKTtcbiAgICB9IGNhdGNoICh2ZXJpZnlFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignQVBJOiBTTVRQIHZlcmlmaWNhdGlvbiBvciBzZW5kaW5nIGZhaWxlZDonLCB2ZXJpZnlFcnJvcik7XG5cbiAgICAgIC8vIFRSWSBBTFRFUk5BVElWRSBBUFBST0FDSDogVHJ5IHNlbmRpbmcgd2l0aG91dCB2ZXJpZmljYXRpb24gZmlyc3RcbiAgICAgIGNvbnNvbGUubG9nKCdBUEk6IFRyeWluZyBhbHRlcm5hdGl2ZSBhcHByb2FjaCAtIHNlbmRpbmcgd2l0aG91dCB2ZXJpZmljYXRpb24nKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBhd2FpdCBzZW5kRW1haWwoXG4gICAgICAgICAgICB0cmFuc3BvcnRlcixcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgZW1haWwsXG4gICAgICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgICAgIGZpcnN0TmFtZSxcbiAgICAgICAgICAgICAgbGFzdE5hbWUsXG4gICAgICAgICAgICAgIGNvbXBhbnksXG4gICAgICAgICAgICAgIHdlYnNpdGUsXG4gICAgICAgICAgICAgIHBob25lXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZW1haWxVc2VyXG4gICAgICAgICk7XG4gICAgICB9IGNhdGNoIChzZW5kRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignQVBJOiBBbHRlcm5hdGl2ZSBhcHByb2FjaCBhbHNvIGZhaWxlZDonLCBzZW5kRXJyb3IpO1xuXG4gICAgICAgIC8vIEVOSEFOQ0VEOiBUcnkgd2l0aG91dCBhdXRoIGlmIHRoaXMgaXMgV2ViaHVzZXQgcmVsYXkgc2VydmVyXG4gICAgICAgIGlmIChlbWFpbEhvc3QuaW5jbHVkZXMoJ3dlYmh1c2V0JykpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnQVBJOiBUcnlpbmcgb25lIG1vcmUgYXBwcm9hY2ggLSBXZWJodXNldCByZWxheSB3aXRob3V0IGF1dGgnKTtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgbm9BdXRoVHJhbnNwb3J0ZXIgPSBub2RlbWFpbGVyLmNyZWF0ZVRyYW5zcG9ydCh7XG4gICAgICAgICAgICAgIGhvc3Q6IGVtYWlsSG9zdCxcbiAgICAgICAgICAgICAgcG9ydDogZW1haWxQb3J0LFxuICAgICAgICAgICAgICBzZWN1cmU6IGVtYWlsU2VjdXJlLFxuICAgICAgICAgICAgICAvLyBObyBhdXRoIGZvciB3ZWJodXNldCByZWxheSBhcyBwZXIgdGhlaXIgZG9jc1xuICAgICAgICAgICAgICBkZWJ1ZzogdHJ1ZVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBzZW5kRW1haWwoXG4gICAgICAgICAgICAgICAgbm9BdXRoVHJhbnNwb3J0ZXIsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgICAgIGVtYWlsLFxuICAgICAgICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgIGZpcnN0TmFtZSxcbiAgICAgICAgICAgICAgICAgIGxhc3ROYW1lLFxuICAgICAgICAgICAgICAgICAgY29tcGFueSxcbiAgICAgICAgICAgICAgICAgIHdlYnNpdGUsXG4gICAgICAgICAgICAgICAgICBwaG9uZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZW1haWxVc2VyXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0gY2F0Y2ggKG5vQXV0aEVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdBUEk6IEV2ZW4gbm8tYXV0aCBhcHByb2FjaCBmYWlsZWQ6Jywgbm9BdXRoRXJyb3IpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBJZiB3ZSdyZSBpbiBkZXZlbG9wbWVudCBhbmQgdGhlIHJlYWwgU01UUCBmYWlscywgdHJ5IEV0aGVyZWFsIGFzIGZhbGxiYWNrXG4gICAgICBpZiAoaXNEZXZlbG9wbWVudE1vZGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0FQSTogU01UUCBmYWlsZWQgaW4gZGV2ZWxvcG1lbnQsIGZhbGxpbmcgYmFjayB0byBFdGhlcmVhbCcpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHRlc3RBY2NvdW50ID0gYXdhaXQgbm9kZW1haWxlci5jcmVhdGVUZXN0QWNjb3VudCgpO1xuXG4gICAgICAgICAgY29uc3QgdGVzdFRyYW5zcG9ydGVyID0gbm9kZW1haWxlci5jcmVhdGVUcmFuc3BvcnQoe1xuICAgICAgICAgICAgaG9zdDogJ3NtdHAuZXRoZXJlYWwuZW1haWwnLFxuICAgICAgICAgICAgcG9ydDogNTg3LFxuICAgICAgICAgICAgc2VjdXJlOiBmYWxzZSxcbiAgICAgICAgICAgIGF1dGg6IHtcbiAgICAgICAgICAgICAgdXNlcjogdGVzdEFjY291bnQudXNlcixcbiAgICAgICAgICAgICAgcGFzczogdGVzdEFjY291bnQucGFzcyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICAvLyBGb3JtYXQgbWVzc2FnZSB3aXRoIGFsbCBhdmFpbGFibGUgZmllbGRzXG4gICAgICAgICAgY29uc3QgZm9ybWF0dGVkTWVzc2FnZSA9IGZvcm1hdE1lc3NhZ2VXaXRoQWxsRmllbGRzKHtcbiAgICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgICBmaXJzdE5hbWUsXG4gICAgICAgICAgICBsYXN0TmFtZSxcbiAgICAgICAgICAgIGNvbXBhbnksXG4gICAgICAgICAgICB3ZWJzaXRlLFxuICAgICAgICAgICAgcGhvbmVcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIC8vIFNlbmQgd2l0aCB0ZXN0IGFjY291bnRcbiAgICAgICAgICBjb25zdCBpbmZvID0gYXdhaXQgdGVzdFRyYW5zcG9ydGVyLnNlbmRNYWlsKHtcbiAgICAgICAgICAgIGZyb206IGBIZXB0YSA8JHtlbWFpbFVzZXJ9PmAsXG4gICAgICAgICAgICB0bzogZW1haWxVc2VyLFxuICAgICAgICAgICAgc3ViamVjdDogYEtvbnRha3Rza2plbWE6ICR7bmFtZX1gLFxuICAgICAgICAgICAgdGV4dDogYE5hdm46ICR7bmFtZX1cXG5FLXBvc3Q6ICR7ZW1haWx9XFxuVGVsZWZvbjogJHtwaG9uZSB8fCAnSWtrZSBvcHBnaXR0J31cXG4ke2Zvcm1hdHRlZE1lc3NhZ2V9YCxcbiAgICAgICAgICAgIGh0bWw6IGA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICA8aDI+TnkgaGVudmVuZGVsc2U8L2gyPlxuICAgICAgICAgICAgICAgICAgICA8cD48Yj5OYXZuOjwvYj4gJHtuYW1lfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgPHA+PGI+RS1wb3N0OjwvYj4gJHtlbWFpbH08L3A+XG4gICAgICAgICAgICAgICAgICAgICR7cGhvbmUgPyBgPHA+PGI+VGVsZWZvbjo8L2I+ICR7cGhvbmV9PC9wPmAgOiAnJ31cbiAgICAgICAgICAgICAgICAgICAgJHtjb21wYW55ID8gYDxwPjxiPlNlbHNrYXA6PC9iPiAke2NvbXBhbnl9PC9wPmAgOiAnJ31cbiAgICAgICAgICAgICAgICAgICAgJHt3ZWJzaXRlID8gYDxwPjxiPk5ldHRzaWRlOjwvYj4gJHt3ZWJzaXRlfTwvcD5gIDogJyd9XG4gICAgICAgICAgICAgICAgICAgIDxwPjxiPk1lbGRpbmc6PC9iPjwvcD5cbiAgICAgICAgICAgICAgICAgICAgPGRpdj4ke21lc3NhZ2UucmVwbGFjZSgvXFxuL2csICc8YnI+Jyl9PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgPC9kaXY+YCxcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGNvbnNvbGUubG9nKCdBUEk6IFRlc3QgZW1haWwgc2VudDonLCBpbmZvLm1lc3NhZ2VJZCk7XG4gICAgICAgICAgY29uc29sZS5sb2coJ0FQSTogUHJldmlldyBVUkw6Jywgbm9kZW1haWxlci5nZXRUZXN0TWVzc2FnZVVybChpbmZvKSk7XG5cbiAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgIHRlc3RNb2RlOiB0cnVlLFxuICAgICAgICAgICAgcHJldmlld1VybDogbm9kZW1haWxlci5nZXRUZXN0TWVzc2FnZVVybChpbmZvKSxcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdFLXBvc3Qgc2VuZHQgaSB0ZXN0bW9kdXMuIFNqZWtrIHNlcnZlcmVuIGZvciBmb3Jow6VuZHN2aXNuaW5nc2xlbmtlLidcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAodGVzdEVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignQVBJOiBFdmVuIGZhbGxiYWNrIHRlc3QgYWNjb3VudCBmYWlsZWQ6JywgdGVzdEVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICBlcnJvcjogJ0t1bm5lIGlra2Uga29ibGUgdGlsIGUtcG9zdHRqZW5lc3Rlbi4gVmVubmxpZ3N0IGtvbnRha3Qgb3NzIGRpcmVrdGUuJyxcbiAgICAgICAgZGV0YWlsczogU3RyaW5nKHZlcmlmeUVycm9yKSxcbiAgICAgICAgc3VjY2VzczogZmFsc2VcbiAgICAgIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gICAgfVxuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignQVBJOiBHZW5lcmFsIGVycm9yIGluIGNvbnRhY3Qgcm91dGU6JywgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBlcnJvcjogJ0RldCBvcHBzdG9kIGVuIGZlaWwgdmVkIGJlaGFuZGxpbmcgYXYga29udGFrdHNramVtYScsXG4gICAgICBkZXRhaWxzOiBTdHJpbmcoZXJyb3IpLFxuICAgICAgc3VjY2VzczogZmFsc2VcbiAgICB9LCB7IHN0YXR1czogNTAwIH0pO1xuICB9XG59XG5cbi8vIEhlbHBlciBmdW5jdGlvbiB0byBmb3JtYXQgdGhlIG1lc3NhZ2UgdGV4dCB3aXRoIGFsbCBmaWVsZHNcbmZ1bmN0aW9uIGZvcm1hdE1lc3NhZ2VXaXRoQWxsRmllbGRzKHsgbWVzc2FnZSwgZmlyc3ROYW1lLCBsYXN0TmFtZSwgY29tcGFueSwgd2Vic2l0ZSwgcGhvbmUgfSkge1xuICBsZXQgZm9ybWF0dGVkTWVzc2FnZSA9IGBNZWxkaW5nOiAke21lc3NhZ2V9YDtcblxuICAvLyBBZGQgZXh0cmEgaW5mb3JtYXRpb24gaWYgYXZhaWxhYmxlXG4gIGlmIChmaXJzdE5hbWUgJiYgbGFzdE5hbWUpIHtcbiAgICBmb3JtYXR0ZWRNZXNzYWdlICs9IGBcXG5cXG5Gb3JuYXZuOiAke2ZpcnN0TmFtZX1cXG5FdHRlcm5hdm46ICR7bGFzdE5hbWV9YDtcbiAgfVxuXG4gIGlmIChjb21wYW55KSB7XG4gICAgZm9ybWF0dGVkTWVzc2FnZSArPSBgXFxuU2Vsc2thcDogJHtjb21wYW55fWA7XG4gIH1cblxuICBpZiAod2Vic2l0ZSkge1xuICAgIGZvcm1hdHRlZE1lc3NhZ2UgKz0gYFxcbk5ldHRzaWRlOiAke3dlYnNpdGV9YDtcbiAgfVxuXG4gIGlmIChwaG9uZSkge1xuICAgIGZvcm1hdHRlZE1lc3NhZ2UgKz0gYFxcblRlbGVmb246ICR7cGhvbmV9YDtcbiAgfVxuXG4gIHJldHVybiBmb3JtYXR0ZWRNZXNzYWdlO1xufVxuXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gc2VuZCBlbWFpbFxuYXN5bmMgZnVuY3Rpb24gc2VuZEVtYWlsKHRyYW5zcG9ydGVyLCBmb3JtRGF0YSwgZnJvbUVtYWlsKSB7XG4gIGNvbnN0IHtcbiAgICBuYW1lLFxuICAgIGVtYWlsLFxuICAgIG1lc3NhZ2UsXG4gICAgZmlyc3ROYW1lLFxuICAgIGxhc3ROYW1lLFxuICAgIGNvbXBhbnksXG4gICAgd2Vic2l0ZSxcbiAgICBwaG9uZVxuICB9ID0gZm9ybURhdGE7XG5cbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZygnQVBJOiBQcmVwYXJpbmcgZW1haWwgdG8gc2VuZCcpO1xuXG4gICAgLy8gTG9nIHRoZSBmdWxsIG1haWwgY29uZmlndXJhdGlvblxuICAgIGNvbnN0IG1haWxPcHRpb25zID0ge1xuICAgICAgZnJvbTogYEhlcHRhIDwke2Zyb21FbWFpbH0+YCxcbiAgICAgIHRvOiBmcm9tRW1haWwsXG4gICAgICByZXBseVRvOiBlbWFpbCxcbiAgICAgIHN1YmplY3Q6IGBLb250YWt0c2tqZW1hOiAke25hbWV9YFxuICAgIH07XG5cbiAgICBjb25zb2xlLmxvZygnQVBJOiBNYWlsIG9wdGlvbnM6Jywge1xuICAgICAgZnJvbTogbWFpbE9wdGlvbnMuZnJvbSxcbiAgICAgIHRvOiBtYWlsT3B0aW9ucy50byxcbiAgICAgIHJlcGx5VG86IG1haWxPcHRpb25zLnJlcGx5VG8sXG4gICAgICBzdWJqZWN0OiBtYWlsT3B0aW9ucy5zdWJqZWN0XG4gICAgfSk7XG5cbiAgICAvLyBGb3JtYXQgbWVzc2FnZSB3aXRoIGFsbCBkZXRhaWxzXG4gICAgY29uc3QgZGV0YWlsZWRNZXNzYWdlID0gZm9ybWF0TWVzc2FnZVdpdGhBbGxGaWVsZHMoe1xuICAgICAgbWVzc2FnZSxcbiAgICAgIGZpcnN0TmFtZSxcbiAgICAgIGxhc3ROYW1lLFxuICAgICAgY29tcGFueSxcbiAgICAgIHdlYnNpdGUsXG4gICAgICBwaG9uZVxuICAgIH0pO1xuXG4gICAgLy8gVXNlIHRoZSBmcm9tIGVtYWlsIGZyb20gZW52aXJvbm1lbnQgdmFyaWFibGVzXG4gICAgY29uc3QgZnVsbE1haWxPcHRpb25zID0ge1xuICAgICAgLi4ubWFpbE9wdGlvbnMsXG4gICAgICB0ZXh0OiBgXG4gICAgICAgIE5hdm46ICR7bmFtZX1cbiAgICAgICAgRS1wb3N0OiAke2VtYWlsfVxuICAgICAgICAke3Bob25lID8gYFRlbGVmb246ICR7cGhvbmV9YCA6ICcnfVxuICAgICAgICAke2NvbXBhbnkgPyBgU2Vsc2thcDogJHtjb21wYW55fWAgOiAnJ31cbiAgICAgICAgJHt3ZWJzaXRlID8gYE5ldHRzaWRlOiAke3dlYnNpdGV9YCA6ICcnfVxuICAgICAgICBcbiAgICAgICAgTWVsZGluZzogJHttZXNzYWdlfVxuICAgICAgYCxcbiAgICAgIGh0bWw6IGBcbiAgICAgICAgPGRpdiBzdHlsZT1cImZvbnQtZmFtaWx5OiBBcmlhbCwgc2Fucy1zZXJpZjsgbWF4LXdpZHRoOiA2MDBweDsgbWFyZ2luOiAwIGF1dG87XCI+XG4gICAgICAgICAgPGgyPk55IGhlbnZlbmRlbHNlIGZyYSBrb250YWt0c2tqZW1hPC9oMj5cbiAgICAgICAgICA8cD48c3Ryb25nPk5hdm46PC9zdHJvbmc+ICR7bmFtZX08L3A+XG4gICAgICAgICAgPHA+PHN0cm9uZz5FLXBvc3Q6PC9zdHJvbmc+ICR7ZW1haWx9PC9wPlxuICAgICAgICAgICR7cGhvbmUgPyBgPHA+PHN0cm9uZz5UZWxlZm9uOjwvc3Ryb25nPiAke3Bob25lfTwvcD5gIDogJyd9XG4gICAgICAgICAgJHtjb21wYW55ID8gYDxwPjxzdHJvbmc+U2Vsc2thcDo8L3N0cm9uZz4gJHtjb21wYW55fTwvcD5gIDogJyd9XG4gICAgICAgICAgJHt3ZWJzaXRlID8gYDxwPjxzdHJvbmc+TmV0dHNpZGU6PC9zdHJvbmc+ICR7d2Vic2l0ZX08L3A+YCA6ICcnfVxuICAgICAgICAgIDxwPjxzdHJvbmc+TWVsZGluZzo8L3N0cm9uZz48L3A+XG4gICAgICAgICAgPGRpdiBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6ICNmNWY1ZjU7IHBhZGRpbmc6IDE1cHg7IG1hcmdpbi10b3A6IDEwcHg7XCI+XG4gICAgICAgICAgICAke21lc3NhZ2UucmVwbGFjZSgvXFxuL2csICc8YnI+Jyl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgYFxuICAgIH07XG5cbiAgICBjb25zb2xlLmxvZygnQVBJOiBBdHRlbXB0aW5nIHRvIHNlbmQgZW1haWwgbm93Jyk7XG5cbiAgICAvLyBTZW5kIGVtYWlsXG4gICAgY29uc3QgaW5mbyA9IGF3YWl0IHRyYW5zcG9ydGVyLnNlbmRNYWlsKGZ1bGxNYWlsT3B0aW9ucyk7XG4gICAgY29uc29sZS5sb2coJ0FQSTogRW1haWwgc2VudCBzdWNjZXNzZnVsbHk6JywgaW5mbyk7XG5cbiAgICAvLyBPcHRpb25hbDogU2VuZCBhdXRvLXJlcGx5XG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKCdBUEk6IFNlbmRpbmcgYXV0by1yZXBseSB0bycsIGVtYWlsKTtcblxuICAgICAgYXdhaXQgdHJhbnNwb3J0ZXIuc2VuZE1haWwoe1xuICAgICAgICBmcm9tOiBgSGVwdGEgPCR7ZnJvbUVtYWlsfT5gLFxuICAgICAgICB0bzogZW1haWwsIC8vIFNlbmRpbmcgdG8gdGhlIHZpc2l0b3IncyBlbWFpbFxuICAgICAgICBzdWJqZWN0OiAnVGFrayBmb3IgZGluIGhlbnZlbmRlbHNlIHRpbCBIZXB0YScsXG4gICAgICAgIHRleHQ6IGBcbiAgICAgICAgICBIZWkgJHtmaXJzdE5hbWUgfHwgbmFtZX1cbiAgICAgICAgICBcbiAgICAgICAgICBUYWtrIGZvciBkaW4gaGVudmVuZGVsc2UgdGlsIEhlcHRhLiBWaSBoYXIgbW90dGF0dCBtZWxkaW5nZW4gZGluIG9nIHZpbCB0YSBrb250YWt0IHPDpSBzbmFydCBzb20gbXVsaWcuXG4gICAgICAgICAgXG4gICAgICAgICAgTWVkIHZlbm5saWcgaGlsc2VuLFxuICAgICAgICAgIEhlcHRhIEFTXG4gICAgICAgIGAsXG4gICAgICAgIGh0bWw6IGBcbiAgICAgICAgICA8ZGl2IHN0eWxlPVwiZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmOyBtYXgtd2lkdGg6IDYwMHB4OyBtYXJnaW46IDAgYXV0bztcIj5cbiAgICAgICAgICAgIDxwPkhlaSAke2ZpcnN0TmFtZSB8fCBuYW1lfSE8L3A+XG4gICAgICAgICAgICA8cD5UYWtrIGZvciBkaW4gaGVudmVuZGVsc2UgdGlsIEhlcHRhLiBWaSBoYXIgbW90dGF0dCBtZWxkaW5nZW4gZGluIG9nIHZpbCB0YSBrb250YWt0IHPDpSBzbmFydCBzb20gbXVsaWcuPC9wPlxuICAgICAgICAgICAgPHA+TWVkIHZlbm5saWcgaGlsc2VuLDxicj5IZXB0YSBBUzwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgYCxoZWFkZXJzOiB7XG4gICAgICAgICAgJ1gtUHJpb3JpdHknOiAnMycsXG4gICAgICAgICAgJ0ltcG9ydGFuY2UnOiAnTm9ybWFsJ1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgY29uc29sZS5sb2coJ0FQSTogQXV0by1yZXBseSBzZW50IHN1Y2Nlc3NmdWxseScpO1xuICAgIH0gY2F0Y2ggKGF1dG9SZXBseUVycm9yKSB7XG4gICAgICAvLyBEb24ndCBmYWlsIGlmIGF1dG8tcmVwbHkgZmFpbHNcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0FQSTogQXV0by1yZXBseSBmYWlsZWQsIGJ1dCBtYWluIGVtYWlsIHdhcyBzZW50OicsIGF1dG9SZXBseUVycm9yKTtcbiAgICB9XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIG1lc3NhZ2VJZDogaW5mby5tZXNzYWdlSWQsXG4gICAgICBtZXNzYWdlOiAnS29udGFrdHNramVtYSBtb3R0YXR0IG9nIGUtcG9zdCBzZW5kdCdcbiAgICB9KTtcbiAgfSBjYXRjaCAoZW1haWxFcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0FQSTogRXJyb3Igc2VuZGluZyBlbWFpbDonLCBlbWFpbEVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgZXJyb3I6ICdLdW5uZSBpa2tlIHNlbmRlIGUtcG9zdCcsXG4gICAgICBkZXRhaWxzOiBTdHJpbmcoZW1haWxFcnJvciksXG4gICAgICBzdWNjZXNzOiBmYWxzZVxuICAgIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gIH1cbn1cblxuLy8gQWxzbyBoYW5kbGUgT1BUSU9OUyByZXF1ZXN0cyBmb3IgQ09SUyBwcmVmbGlnaHRcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBPUFRJT05TKCkge1xuICByZXR1cm4gbmV3IE5leHRSZXNwb25zZShudWxsLCB7XG4gICAgc3RhdHVzOiAyMDAsXG4gICAgaGVhZGVyczoge1xuICAgICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbic6ICcqJyxcbiAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzJzogJ1BPU1QsIE9QVElPTlMnLFxuICAgICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnMnOiAnQ29udGVudC1UeXBlJ1xuICAgIH1cbiAgfSk7XG59Il0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsIm5vZGVtYWlsZXIiLCJQT1NUIiwicmVxdWVzdCIsImNvbnNvbGUiLCJsb2ciLCJib2R5IiwianNvbiIsInBhcnNlRXJyb3IiLCJlcnJvciIsInN1Y2Nlc3MiLCJzdGF0dXMiLCJ0ZXN0IiwibWVzc2FnZSIsIm5hbWUiLCJlbWFpbCIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwiY29tcGFueSIsIndlYnNpdGUiLCJwaG9uZSIsIkVNQUlMX0hPU1QiLCJwcm9jZXNzIiwiZW52IiwiRU1BSUxfUE9SVCIsIkVNQUlMX1VTRVIiLCJFTUFJTF9GUk9NIiwiRU1BSUxfVE8iLCJFTUFJTF9TRUNVUkUiLCJFTUFJTF9QQVNTIiwiRU1BSUxfUEFTU1dPUkQiLCJOT0RFX0VOViIsImVtYWlsVXNlciIsImVtYWlsUGFzc3dvcmQiLCJlbWFpbEhvc3QiLCJlbWFpbFBvcnQiLCJwYXJzZUludCIsImVtYWlsU2VjdXJlIiwiaG9zdCIsInBvcnQiLCJzZWN1cmUiLCJ1c2VyIiwiaGFzUGFzc3dvcmQiLCJpc0RldmVsb3BtZW50TW9kZSIsInNob3VsZFVzZUV0aGVyZWFsIiwiYXV0aCIsInBhc3MiLCJ0cmFuc3BvcnRPcHRpb25zIiwiZGVidWciLCJsb2dnZXIiLCJ0cmFuc3BvcnRlciIsImNyZWF0ZVRyYW5zcG9ydCIsInRlc3RBY2NvdW50IiwiY3JlYXRlVGVzdEFjY291bnQiLCJ0ZXN0VHJhbnNwb3J0ZXIiLCJmb3JtYXR0ZWRNZXNzYWdlIiwiZm9ybWF0TWVzc2FnZVdpdGhBbGxGaWVsZHMiLCJtYWlsT3B0aW9ucyIsImZyb20iLCJ0byIsInN1YmplY3QiLCJ0ZXh0IiwiaW5mbyIsInNlbmRNYWlsIiwiaHRtbCIsInJlcGxhY2UiLCJtZXNzYWdlSWQiLCJnZXRUZXN0TWVzc2FnZVVybCIsInRlc3RNb2RlIiwicHJldmlld1VybCIsInRlc3RFcnJvciIsImRldGFpbHMiLCJTdHJpbmciLCJ2ZXJpZnkiLCJ2ZXJpZnlFcnJvciIsInNlbmRFbWFpbCIsInNlbmRFcnJvciIsImluY2x1ZGVzIiwibm9BdXRoVHJhbnNwb3J0ZXIiLCJub0F1dGhFcnJvciIsImZvcm1EYXRhIiwiZnJvbUVtYWlsIiwicmVwbHlUbyIsImRldGFpbGVkTWVzc2FnZSIsImZ1bGxNYWlsT3B0aW9ucyIsImhlYWRlcnMiLCJhdXRvUmVwbHlFcnJvciIsImVtYWlsRXJyb3IiLCJPUFRJT05TIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/contact/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/nodemailer"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcontact%2Froute&page=%2Fapi%2Fcontact%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcontact%2Froute.ts&appDir=%2FUsers%2Falexanderamundsen%2FWebstormProjects%2Fwasd%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Falexanderamundsen%2FWebstormProjects%2Fwasd&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();